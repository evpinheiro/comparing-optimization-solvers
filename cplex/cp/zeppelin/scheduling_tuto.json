{"info": {}, "config": {"looknfeel": "default", "personalizedMode": "false"}, "name": "cp/jupyter/scheduling_tuto", "paragraphs": [{"settings": {"forms": {}, "params": {}}, "text": "%md\n# Tutorial: Getting started with *Scheduling* in CPLEX for Python", "apps": [], "results": {"msg": [{"data": "<h1>Tutorial: Getting started with <em>Scheduling</em> in CPLEX for Python</h1>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis notebook introduces the basic building blocks of a scheduling model that can be solved using *Constraint Programming Optimizer* (named CP Optimizer in the following) that is included in *CPLEX for Python*. \n\nIt is part of [Prescriptive Analytics for Python](https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html) and requires a valid subscription to **Decision Optimization on Cloud** or a **local installation of CPLEX Optimizers**. \nDiscover us [here](https://developer.ibm.com/docloud).\n\nTo follow the examples in this section, some knowledge about optimization (math programming or constraint programming) and about modeling optimization problems is necessary.\nFor beginners in optimization, following the online free Decision Optimization tutorials ([here](https://ibmdecisionoptimization.github.io/tutorials/html/Linear_Programming.html) and [here](https://ibmdecisionoptimization.github.io/tutorials/html/Beyond_Linear_Programming.html)) might help to get a better understanding of Mathematical Optimization.\n\n\nEach chapter of this notebook is a self-contained separate lesson.\n\n* Chapter 1. Introduction to Scheduling\n* Chapter 2. Modeling and solving a simple problem: house building\n* Chapter 3. Adding workers and transition times to the house building problem\n* Chapter 4. Adding calendars to the house building problem\n* Chapter 5. Using cumulative functions in the house building problem\n* Chapter 6. Using alternative resources in the house building problem\n* Chapter 7. Using state functions: house building with state incompatibilities\n* Summary\n* References\n", "apps": [], "results": {"msg": [{"data": "<p>This notebook introduces the basic building blocks of a scheduling model that can be solved using <em>Constraint Programming Optimizer</em> (named CP Optimizer in the following) that is included in <em>CPLEX for Python</em>. </p>\n<p></p>\n<p>It is part of <a href=\"https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html\">Prescriptive Analytics for Python</a> and requires a valid subscription to <strong>Decision Optimization on Cloud</strong> or a <strong>local installation of CPLEX Optimizers</strong>. </p>\n<p>Discover us <a href=\"https://developer.ibm.com/docloud\">here</a>.</p>\n<p></p>\n<p>To follow the examples in this section, some knowledge about optimization (math programming or constraint programming) and about modeling optimization problems is necessary.</p>\n<p>For beginners in optimization, following the online free Decision Optimization tutorials (<a href=\"https://ibmdecisionoptimization.github.io/tutorials/html/Linear_Programming.html\">here</a> and <a href=\"https://ibmdecisionoptimization.github.io/tutorials/html/Beyond_Linear_Programming.html\">here</a>) might help to get a better understanding of Mathematical Optimization.</p>\n<p></p>\n<p></p>\n<p>Each chapter of this notebook is a self-contained separate lesson.</p>\n<p></p>\n<ul>\n<li>Chapter 1. Introduction to Scheduling</li>\n</ul>\n<ul>\n<li>Chapter 2. Modeling and solving a simple problem: house building</li>\n</ul>\n<ul>\n<li>Chapter 3. Adding workers and transition times to the house building problem</li>\n</ul>\n<ul>\n<li>Chapter 4. Adding calendars to the house building problem</li>\n</ul>\n<ul>\n<li>Chapter 5. Using cumulative functions in the house building problem</li>\n</ul>\n<ul>\n<li>Chapter 6. Using alternative resources in the house building problem</li>\n</ul>\n<ul>\n<li>Chapter 7. Using state functions: house building with state incompatibilities</li>\n</ul>\n<ul>\n<li>Summary</li>\n</ul>\n<ul>\n<li>References</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 1. Introduction to Scheduling\nThis chapter describes the basic characteristics of a scheduling program.", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 1. Introduction to Scheduling</h1>\n<p>This chapter describes the basic characteristics of a scheduling program.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Set up the model solving\n\nSolving capabilities are required to solve example models that are given in the following. \nThere are several ways to solve a model:\n\n* Subscribe to the private cloud offer or Decision Optimization on Cloud solve service [here](https://developer.ibm.com/docloud).\n* Use DSX Desktop or Local version that contain a pre-installed version of CPLEX Community Edition\n* Use a local solver, a licensed installation of [CPLEX Optimization Studio](https://www.ibm.com/bs-en/marketplace/ibm-ilog-cplex) to run the notebook locally.\n\nWhen using a cloud solving solution, the following attributes must be set with appropriate values: ", "apps": [], "results": {"msg": [{"data": "<h2>Set up the model solving</h2>\n<p></p>\n<p>Solving capabilities are required to solve example models that are given in the following. </p>\n<p>There are several ways to solve a model:</p>\n<p></p>\n<ul>\n<li>Subscribe to the private cloud offer or Decision Optimization on Cloud solve service <a href=\"https://developer.ibm.com/docloud\">here</a>.</li>\n</ul>\n<ul>\n<li>Use DSX Desktop or Local version that contain a pre-installed version of CPLEX Community Edition</li>\n</ul>\n<ul>\n<li>Use a local solver, a licensed installation of <a href=\"https://www.ibm.com/bs-en/marketplace/ibm-ilog-cplex\">CPLEX Optimization Studio</a> to run the notebook locally.</li>\n</ul>\n<p></p>\n<p>When using a cloud solving solution, the following attributes must be set with appropriate values: </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nurl = None\nkey = None", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Scheduling building blocks\n\nScheduling is the act of creating a schedule, which is a timetable for planned occurrences. \nScheduling may also involve allocating resources to activities over time. \n\nA scheduling problem can be viewed as a constraint satisfaction problem or as a constrained optimization problem. Regardless of how it is viewed, a scheduling problem is defined by:\n* A set of *time intervals*, to define activities, operations, or tasks to be completed\n* A set of *temporal constraints*, to define possible relationships between the start and end times of the intervals\n* A set of *specialized constraints*, to specify of the complex relationships on a set of intervals due to the state and finite capacity of resources.", "apps": [], "results": {"msg": [{"data": "<h2>Scheduling building blocks</h2>\n<p></p>\n<p>Scheduling is the act of creating a schedule, which is a timetable for planned occurrences. </p>\n<p>Scheduling may also involve allocating resources to activities over time. </p>\n<p></p>\n<p>A scheduling problem can be viewed as a constraint satisfaction problem or as a constrained optimization problem. Regardless of how it is viewed, a scheduling problem is defined by:</p>\n<ul>\n<li>A set of <em>time intervals</em>, to define activities, operations, or tasks to be completed</li>\n</ul>\n<ul>\n<li>A set of <em>temporal constraints</em>, to define possible relationships between the start and end times of the intervals</li>\n</ul>\n<ul>\n<li>A set of <em>specialized constraints</em>, to specify of the complex relationships on a set of intervals due to the state and finite capacity of resources.</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Creation of the model\n\nA scheduling model starts with the creation of the model container, as follows", "apps": [], "results": {"msg": [{"data": "<h2>Creation of the model</h2>\n<p></p>\n<p>A scheduling model starts with the creation of the model container, as follows</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl0 = CpoModel()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis code creates a CP model container that allows the use of constraints that are specific to constraint programming or to\nscheduling.", "apps": [], "results": {"msg": [{"data": "<p>This code creates a CP model container that allows the use of constraints that are specific to constraint programming or to</p>\n<p>scheduling.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Declarations of decision variables\n\nVariable declarations define the type of each variable in the model. For example, to create a variable that equals the amount of material shipped from location *i* to location *j*, a variable named *ship* can be created as follows:\n<code>\n   ship = [[integer_var(min=0) for j in range(N)] for i in range(N)]\n</code>", "apps": [], "results": {"msg": [{"data": "<h2>Declarations of decision variables</h2>\n<p></p>\n<p>Variable declarations define the type of each variable in the model. For example, to create a variable that equals the amount of material shipped from location <em>i</em> to location <em>j</em>, a variable named <em>ship</em> can be created as follows:</p>\n<p><code></p>\n<p>ship = [[integer_var(min=0) for j in range(N)] for i in range(N)]</p>\n<p></code></p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis code declares an *array* (list of lists in Python) of non-negative integer decision variables; <code>ship[i][j]</code> is the decision variable handling the amount of material shipped from location *i* to location *j*.\n\nFor scheduling there are specific additional decision variables, namely:\n  * *interval* variables\n  * *sequence* variables.\n\n*Activities*, *operations* and*tasks* are represented as interval decision variables.\n\nAn interval has a *start*, a *end*, a *length*, and a *size*. An interval variable allows for these values to be variable within the model. \nThe start is the lower endpoint of the interval and the end is the upper endpoint of the interval. \nBy default, the size is equal to the length, which is the difference between the end and the start of the interval. \nIn general, the size is a lower bound on the length.\n\nAn interval variable may also be optional, and its presence in the solution is represented by a decision variable. \nIf an interval is not present in the solution, this means that any constraints on this interval acts like the interval is \u201cnot there\u201d.\nThe exact semantics will depend on the specific constraint.\n\nThe following example contains a dictionary of interval decision variables where the sizes of the interval variables are fixed and the keys are 2 dimensional:\n<code>\n   itvs = {(h,t) : mdl.interval_var(size = Duration[t]) for h in Houses for t in TaskNames}\n</code>", "apps": [], "results": {"msg": [{"data": "<p>This code declares an <em>array</em> (list of lists in Python) of non-negative integer decision variables; <code>ship[i][j]</code> is the decision variable handling the amount of material shipped from location <em>i</em> to location <em>j</em>.</p>\n<p></p>\n<p>For scheduling there are specific additional decision variables, namely:</p>\n<ul>\n<li><em>interval</em> variables</li>\n</ul>\n<ul>\n<li><em>sequence</em> variables.</li>\n</ul>\n<p></p>\n<p><em>Activities</em>, <em>operations</em> and<em>tasks</em> are represented as interval decision variables.</p>\n<p></p>\n<p>An interval has a <em>start</em>, a <em>end</em>, a <em>length</em>, and a <em>size</em>. An interval variable allows for these values to be variable within the model. </p>\n<p>The start is the lower endpoint of the interval and the end is the upper endpoint of the interval. </p>\n<p>By default, the size is equal to the length, which is the difference between the end and the start of the interval. </p>\n<p>In general, the size is a lower bound on the length.</p>\n<p></p>\n<p>An interval variable may also be optional, and its presence in the solution is represented by a decision variable. </p>\n<p>If an interval is not present in the solution, this means that any constraints on this interval acts like the interval is \u201cnot there\u201d.</p>\n<p>The exact semantics will depend on the specific constraint.</p>\n<p></p>\n<p>The following example contains a dictionary of interval decision variables where the sizes of the interval variables are fixed and the keys are 2 dimensional:</p>\n<p><code></p>\n<p>itvs = {(h,t) : mdl.interval_var(size = Duration[t]) for h in Houses for t in TaskNames}</p>\n<p></code></p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Objective function\n\nThe objective function is an expression that has to be optimized. This function consists of variables and data that have been declared earlier in the model.\nThe objective function is introduced by either the *minimize* or the *maximize* function. \n\nFor example:\n<code>\n   mdl.minimize(mdl.endOf(tasks[\"moving\"]))\n</code>\nindicates that the end of the interval variable <code>tasks[\"moving\"]</code> needs to be minimized.", "apps": [], "results": {"msg": [{"data": "<h2>Objective function</h2>\n<p></p>\n<p>The objective function is an expression that has to be optimized. This function consists of variables and data that have been declared earlier in the model.</p>\n<p>The objective function is introduced by either the <em>minimize</em> or the <em>maximize</em> function. </p>\n<p></p>\n<p>For example:</p>\n<p><code></p>\n<p>mdl.minimize(mdl.endOf(tasks[\"moving\"]))</p>\n<p></code></p>\n<p>indicates that the end of the interval variable <code>tasks[\"moving\"]</code> needs to be minimized.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Constraints\n\nThe *constraints* indicate the conditions that are necessary for a feasible solution to the model.\n\nSeveral types of constraints can be placed on interval variables:\n* *precedence* constraints, which ensure that relative positions of intervals in the solution (For example a precedence constraint can model a requirement that an interval a must end before interval b starts, optionally with some minimum delay z);\n* *no overlap* constraints, which ensure that positions of intervals in the solution are disjointed in time;\n* *span* constraints, which ensure that one interval to cover those intervals in a set of intervals;\n* *alternative* constraints, which ensure that exactly one of a set of intervals be present in the solution;\n* *synchronize* constraints, which ensure that a set of intervals start and end at the same time as a given interval variable if it is present in the solution;\n* *cumulative expression* constraints, which restrict the bounds on the domains of cumulative expressions.", "apps": [], "results": {"msg": [{"data": "<h2>Constraints</h2>\n<p></p>\n<p>The <em>constraints</em> indicate the conditions that are necessary for a feasible solution to the model.</p>\n<p></p>\n<p>Several types of constraints can be placed on interval variables:</p>\n<ul>\n<li><em>precedence</em> constraints, which ensure that relative positions of intervals in the solution (For example a precedence constraint can model a requirement that an interval a must end before interval b starts, optionally with some minimum delay z);</li>\n</ul>\n<ul>\n<li><em>no overlap</em> constraints, which ensure that positions of intervals in the solution are disjointed in time;</li>\n</ul>\n<ul>\n<li><em>span</em> constraints, which ensure that one interval to cover those intervals in a set of intervals;</li>\n</ul>\n<ul>\n<li><em>alternative</em> constraints, which ensure that exactly one of a set of intervals be present in the solution;</li>\n</ul>\n<ul>\n<li><em>synchronize</em> constraints, which ensure that a set of intervals start and end at the same time as a given interval variable if it is present in the solution;</li>\n</ul>\n<ul>\n<li><em>cumulative expression</em> constraints, which restrict the bounds on the domains of cumulative expressions.</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Example\nThis section provides a completed example model that can be tested.", "apps": [], "results": {"msg": [{"data": "<h2>Example</h2>\n<p>This section provides a completed example model that can be tested.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe problem is a house building problem. There are ten tasks of fixed size, and each of them needs to be assigned a starting time. \n\nThe statements for creating the interval variables that represent the tasks are:", "apps": [], "results": {"msg": [{"data": "<p>The problem is a house building problem. There are ten tasks of fixed size, and each of them needs to be assigned a starting time. </p>\n<p></p>\n<p>The statements for creating the interval variables that represent the tasks are:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmasonry = mdl0.interval_var(size=35)\ncarpentry = mdl0.interval_var(size=15)\nplumbing = mdl0.interval_var(size=40)\nceiling = mdl0.interval_var(size=15)\nroofing = mdl0.interval_var(size=5)\npainting = mdl0.interval_var(size=10)\nwindows = mdl0.interval_var(size=5)\nfacade = mdl0.interval_var(size=10)\ngarden = mdl0.interval_var(size=5)\nmoving = mdl0.interval_var(size=5)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Adding the constraints\n\nThe constraints in this problem are precedence constraints; some tasks cannot start until other tasks have ended. \nFor example, the *ceilings* must be completed before *painting* can begin. \n\nThe set of precedence constraints for this problem can be added to the model with the block:", "apps": [], "results": {"msg": [{"data": "<h3>Adding the constraints</h3>\n<p></p>\n<p>The constraints in this problem are precedence constraints; some tasks cannot start until other tasks have ended. </p>\n<p>For example, the <em>ceilings</em> must be completed before <em>painting</em> can begin. </p>\n<p></p>\n<p>The set of precedence constraints for this problem can be added to the model with the block:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl0.add( mdl0.end_before_start(masonry, carpentry) )\nmdl0.add( mdl0.end_before_start(masonry, plumbing) )\nmdl0.add( mdl0.end_before_start(masonry, ceiling) )\nmdl0.add( mdl0.end_before_start(carpentry, roofing) )\nmdl0.add( mdl0.end_before_start(ceiling, painting) )\nmdl0.add( mdl0.end_before_start(roofing, windows) )\nmdl0.add( mdl0.end_before_start(roofing, facade) )\nmdl0.add( mdl0.end_before_start(plumbing, facade) )\nmdl0.add( mdl0.end_before_start(roofing, garden) )\nmdl0.add( mdl0.end_before_start(plumbing, garden) )\nmdl0.add( mdl0.end_before_start(windows, moving) )\nmdl0.add( mdl0.end_before_start(facade, moving) )\nmdl0.add( mdl0.end_before_start(garden, moving) )\nmdl0.add( mdl0.end_before_start(painting, moving) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHere, the special constraint *end_before_start()* ensures that one interval variable ends before the other starts. \nIf one of the interval variables is not present, the constraint is automatically satisfied.", "apps": [], "results": {"msg": [{"data": "<p>Here, the special constraint <em>end_before_start()</em> ensures that one interval variable ends before the other starts. </p>\n<p>If one of the interval variables is not present, the constraint is automatically satisfied.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Calling the solve", "apps": [], "results": {"msg": [{"data": "<h3>Calling the solve</h3>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol0 = mdl0.solve(url=url, key=key, TimeLimit=10)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Displaying the solution\n\nThe interval variables and precedence constraints completely describe this simple problem. \n\nPrint statements display the solution, after values have been assigned to the start and end of each of the interval variables in the model.", "apps": [], "results": {"msg": [{"data": "<h3>Displaying the solution</h3>\n<p></p>\n<p>The interval variables and precedence constraints completely describe this simple problem. </p>\n<p></p>\n<p>Print statements display the solution, after values have been assigned to the start and end of each of the interval variables in the model.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol0:\n    var_sol = msol0.get_var_solution(masonry)\n    print(\"Masonry : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(carpentry)\n    print(\"Carpentry : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(plumbing)\n    print(\"Plumbing : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(ceiling)\n    print(\"Ceiling : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(roofing)\n    print(\"Roofing : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(painting)\n    print(\"Painting : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(windows)\n    print(\"Windows : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(facade)\n    print(\"Facade : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol0.get_var_solution(moving)\n    print(\"Moving : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTo understand the solution found by *CP Optimizer* to this satisfiability scheduling problem, consider the line:\n<code>Masonry : 0..35</code>\n\nThe interval variable representing the masonry task, which has size 35, has been assigned the interval [0,35). \nMasonry starts at time 0 and ends at the time point 35.", "apps": [], "results": {"msg": [{"data": "<p>To understand the solution found by <em>CP Optimizer</em> to this satisfiability scheduling problem, consider the line:</p>\n<p><code>Masonry : 0..35</code></p>\n<p></p>\n<p>The interval variable representing the masonry task, which has size 35, has been assigned the interval [0,35). </p>\n<p>Masonry starts at time 0 and ends at the time point 35.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nGraphical view of these tasks can be obtained with following additional code: ", "apps": [], "results": {"msg": [{"data": "<p>Graphical view of these tasks can be obtained with following additional code: </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport docplex.cp.utils_visu as visu\nimport matplotlib.pyplot as plt\n#Change the plot size\nfrom pylab import rcParams\nrcParams['figure.figsize'] = 15, 3", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol0:\n    wt = msol0.get_var_solution(masonry)   \n    visu.interval(wt, 'lightblue', 'masonry')   \n    wt = msol0.get_var_solution(carpentry)   \n    visu.interval(wt, 'lightblue', 'carpentry')\n    wt = msol0.get_var_solution(plumbing)   \n    visu.interval(wt, 'lightblue', 'plumbing')\n    wt = msol0.get_var_solution(ceiling)   \n    visu.interval(wt, 'lightblue', 'ceiling')\n    wt = msol0.get_var_solution(roofing)   \n    visu.interval(wt, 'lightblue', 'roofing')\n    wt = msol0.get_var_solution(painting)   \n    visu.interval(wt, 'lightblue', 'painting')\n    wt = msol0.get_var_solution(windows)   \n    visu.interval(wt, 'lightblue', 'windows')\n    wt = msol0.get_var_solution(facade)   \n    visu.interval(wt, 'lightblue', 'facade')\n    wt = msol0.get_var_solution(moving)   \n    visu.interval(wt, 'lightblue', 'moving')\n    visu.show()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n##### Note on interval variables\n\nAfter a time interval has been assigned a start value (say s) and an end value (say e), the interval is written as [s,e). \nThe time interval does not include the endpoint e. \nIf another interval variable is constrained to be placed after this interval, it can start at the time e.", "apps": [], "results": {"msg": [{"data": "<h5>Note on interval variables</h5>\n<p></p>\n<p>After a time interval has been assigned a start value (say s) and an end value (say e), the interval is written as [s,e). </p>\n<p>The time interval does not include the endpoint e. </p>\n<p>If another interval variable is constrained to be placed after this interval, it can start at the time e.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 2. Modeling and solving house building with an objective", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 2. Modeling and solving house building with an objective</h1>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis chapter presents the same *house building* example in such a manner that minimizes an objective.\n\nIt intends to present how to:\n* use the *interval variable*,\n* use the constraint *endBeforeStart*,\n* use the expressions *startOf* and *endOf*.\n\nThe objective to minimize is here the cost associated with performing specific tasks before a preferred earliest start date or after a preferred latest end date. \nSome tasks must necessarily take place before other tasks, and each task has a given duration. \n\nTo find a solution to this problem, a three-stage method is used: *describe*, *model*, and *solve*.", "apps": [], "results": {"msg": [{"data": "<p>This chapter presents the same <em>house building</em> example in such a manner that minimizes an objective.</p>\n<p></p>\n<p>It intends to present how to:</p>\n<ul>\n<li>use the <em>interval variable</em>,</li>\n</ul>\n<ul>\n<li>use the constraint <em>endBeforeStart</em>,</li>\n</ul>\n<ul>\n<li>use the expressions <em>startOf</em> and <em>endOf</em>.</li>\n</ul>\n<p></p>\n<p>The objective to minimize is here the cost associated with performing specific tasks before a preferred earliest start date or after a preferred latest end date. </p>\n<p>Some tasks must necessarily take place before other tasks, and each task has a given duration. </p>\n<p></p>\n<p>To find a solution to this problem, a three-stage method is used: <em>describe</em>, <em>model</em>, and <em>solve</em>.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Problem to be solved\n\nThe problem consists of assigning start dates to tasks in such a way that the resulting schedule satisfies precedence constraints and minimizes a criterion. \nThe criterion for this problem is to minimize the earliness costs associated with starting certain tasks earlier than a given date, and tardiness costs associated with completing certain tasks later than a given date.\n\nFor each task in the house building project, the following table shows the duration (measured in days) of the task along with the tasks that must finish before the task can start.\n\n**Note:**\nThe unit of time represented by an interval variable is not defined. As a result, the size of the masonry task in this problem could be 35 hours or 35 weeks or 35 months.", "apps": [], "results": {"msg": [{"data": "<h2>Problem to be solved</h2>\n<p></p>\n<p>The problem consists of assigning start dates to tasks in such a way that the resulting schedule satisfies precedence constraints and minimizes a criterion. </p>\n<p>The criterion for this problem is to minimize the earliness costs associated with starting certain tasks earlier than a given date, and tardiness costs associated with completing certain tasks later than a given date.</p>\n<p></p>\n<p>For each task in the house building project, the following table shows the duration (measured in days) of the task along with the tasks that must finish before the task can start.</p>\n<p></p>\n<p><strong>Note:</strong></p>\n<p>The unit of time represented by an interval variable is not defined. As a result, the size of the masonry task in this problem could be 35 hours or 35 weeks or 35 months.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction tasks:\n\n| Task      | Duration | Preceding tasks                   |\n|-----------|----------|-----------------------------------|\n| masonry   | 35       |                                   |\n| carpentry | 15       | masonry                           |\n| plumbing  | 40       | masonry                           |\n| ceiling   | 15       | masonry                           |\n| roofing   | 5        | carpentry                         |\n| painting  | 10       | ceiling                           |\n| windows   | 5        | roofing                           |\n| facade    | 10       | roofing, plumbing                 |\n| garden    | 5        | roofing, plumbing                 |\n| moving    | 5        | windows, facade, garden, painting |", "apps": [], "results": {"msg": [{"data": "<p>House construction tasks:</p>\n<p></p>\n<p>| Task      | Duration | Preceding tasks                   |</p>\n<p>|-----------|----------|-----------------------------------|</p>\n<p>| masonry   | 35       |                                   |</p>\n<p>| carpentry | 15       | masonry                           |</p>\n<p>| plumbing  | 40       | masonry                           |</p>\n<p>| ceiling   | 15       | masonry                           |</p>\n<p>| roofing   | 5        | carpentry                         |</p>\n<p>| painting  | 10       | ceiling                           |</p>\n<p>| windows   | 5        | roofing                           |</p>\n<p>| facade    | 10       | roofing, plumbing                 |</p>\n<p>| garden    | 5        | roofing, plumbing                 |</p>\n<p>| moving    | 5        | windows, facade, garden, painting |</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe other information for the problem includes the earliness and tardiness costs associated with some tasks.", "apps": [], "results": {"msg": [{"data": "<p>The other information for the problem includes the earliness and tardiness costs associated with some tasks.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction task earliness costs:\n    \n| Task      | Preferred earliest start date | Cost per day for starting early |\n|-----------|-------------------------------|---------------------------------|\n| masonry   | 25                            | 200.0                           |\n| carpentry | 75                            | 300.0                           |\n| ceiling   |75                             | 100.0                           |", "apps": [], "results": {"msg": [{"data": "<p>House construction task earliness costs:</p>\n<p></p>\n<p>| Task      | Preferred earliest start date | Cost per day for starting early |</p>\n<p>|-----------|-------------------------------|---------------------------------|</p>\n<p>| masonry   | 25                            | 200.0                           |</p>\n<p>| carpentry | 75                            | 300.0                           |</p>\n<p>| ceiling   |75                             | 100.0                           |</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction task tardiness costs:\n    \n| Task   | Preferred latest end date | Cost per day for ending late |\n|--------|---------------------------|------------------------------|\n| moving | 100                       | 400.0                        |", "apps": [], "results": {"msg": [{"data": "<p>House construction task tardiness costs:</p>\n<p></p>\n<p>| Task   | Preferred latest end date | Cost per day for ending late |</p>\n<p>|--------|---------------------------|------------------------------|</p>\n<p>| moving | 100                       | 400.0                        |</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nSolving the problem consists of identifying starting dates for the tasks such that the total cost, determined by the earliness and lateness costs, is minimized.", "apps": [], "results": {"msg": [{"data": "<p>Solving the problem consists of identifying starting dates for the tasks such that the total cost, determined by the earliness and lateness costs, is minimized.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 1: Describe the problem\n\nThe first step in modeling the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.\n\nWriting a natural language description of this problem requires to answer these questions:\n* What is the known information in this problem ?\n* What are the decision variables or unknowns in this problem ?\n* What are the constraints on these variables ?\n* What is the objective ?", "apps": [], "results": {"msg": [{"data": "<h2>Step 1: Describe the problem</h2>\n<p></p>\n<p>The first step in modeling the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.</p>\n<p></p>\n<p>Writing a natural language description of this problem requires to answer these questions:</p>\n<ul>\n<li>What is the known information in this problem ?</li>\n</ul>\n<ul>\n<li>What are the decision variables or unknowns in this problem ?</li>\n</ul>\n<ul>\n<li>What are the constraints on these variables ?</li>\n</ul>\n<ul>\n<li>What is the objective ?</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n* *What is the known information in this problem ?*\n\n  There are ten house building tasks, each with a given duration. For each task,\nthere is a list of tasks that must be completed before the task can start. Some\ntasks also have costs associated with an early start date or late end date.\n\n\n* *What are the decision variables or unknowns in this problem ?*\n\n  The unknowns are the date that each task will start. The cost is determined by the assigned start dates.\n\n\n* *What are the constraints on these variables ?*\n\n  In this case, each constraint specifies that a particular task may not begin until one or more given tasks have been completed.\n\n\n* *What is the objective ?*\n\n  The objective is to minimize the cost incurred through earliness and tardiness costs.", "apps": [], "results": {"msg": [{"data": "<ul>\n<li><em>What is the known information in this problem ?</em></li>\n</ul>\n<p></p>\n<p>There are ten house building tasks, each with a given duration. For each task,</p>\n<p>there is a list of tasks that must be completed before the task can start. Some</p>\n<p>tasks also have costs associated with an early start date or late end date.</p>\n<p></p>\n<p></p>\n<ul>\n<li><em>What are the decision variables or unknowns in this problem ?</em></li>\n</ul>\n<p></p>\n<p>The unknowns are the date that each task will start. The cost is determined by the assigned start dates.</p>\n<p></p>\n<p></p>\n<ul>\n<li><em>What are the constraints on these variables ?</em></li>\n</ul>\n<p></p>\n<p>In this case, each constraint specifies that a particular task may not begin until one or more given tasks have been completed.</p>\n<p></p>\n<p></p>\n<ul>\n<li><em>What is the objective ?</em></li>\n</ul>\n<p></p>\n<p>The objective is to minimize the cost incurred through earliness and tardiness costs.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 2: Declare the interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 2: Declare the interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nIn the model, each task is represented by an interval variables. \nEach variable represents the unknown information, the scheduled interval for each activity. \nAfter the model is executed, the values assigned to these interval variables will represent the solution to the problem.", "apps": [], "results": {"msg": [{"data": "<p>In the model, each task is represented by an interval variables. </p>\n<p>Each variable represents the unknown information, the scheduled interval for each activity. </p>\n<p>After the model is executed, the values assigned to these interval variables will represent the solution to the problem.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Declaration of engine\nA scheduling model starts with the declaration of the engine as follows:", "apps": [], "results": {"msg": [{"data": "<h3>Declaration of engine</h3>\n<p>A scheduling model starts with the declaration of the engine as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *\n\nmdl1 = CpoModel()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe declaration of necessary interval variables is done as follows:", "apps": [], "results": {"msg": [{"data": "<p>The declaration of necessary interval variables is done as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmasonry = mdl1.interval_var(size=35)\ncarpentry = mdl1.interval_var(size=15)\nplumbing = mdl1.interval_var(size=40)\nceiling = mdl1.interval_var(size=15)\nroofing = mdl1.interval_var(size=5)\npainting = mdl1.interval_var(size=10)\nwindows = mdl1.interval_var(size=5)\nfacade = mdl1.interval_var(size=10)\ngarden = mdl1.interval_var(size=5)\nmoving = mdl1.interval_var(size=5)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 3: Add the precedence constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 3: Add the precedence constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nIn this example, certain tasks can start only after other tasks have been completed.\n*CP Optimizer* allows to express constraints involving temporal relationships between pairs of interval variables using <i>precedence constraints</i>.", "apps": [], "results": {"msg": [{"data": "<p>In this example, certain tasks can start only after other tasks have been completed.</p>\n<p><em>CP Optimizer</em> allows to express constraints involving temporal relationships between pairs of interval variables using <i>precedence constraints</i>.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nPrecedence constraints are used to specify when an interval variable must start or end with respect to the start or end time of another interval variable. \n\nThe following types of precedence constraints are available; if *a* and *b* denote interval variables, both interval variables are present, and *delay* is a number or integer expression (0 by default), then:\n* *end_before_end(a, b, delay)* constrains at least the given delay to elapse between the end of a and the end of b. It imposes the inequality endTime(a) + delay <= endTime(b).\n* *end_before_start(a, b, delay)* constrains at least the given delay to elapse between the end of a and the start of b. It imposes the inequality endTime(a) + delay <= startTime(b).\n* *end_at_end(a, b, delay)* constrains the given delay to separate the end of a and the end of ab. It imposes the equality endTime(a) + delay == endTime(b).\n* *end_at_start(a, b, delay)* constrains the given delay to separate the end of a and the start of b. It imposes the equality endTime(a) + delay == startTime(b).\n* *start_before_end(a, b, delay)* constrains at least the given delay to elapse between the start of a and the end of b. It imposes the inequality startTime(a) + delay <= endTime(b).\n* *start_before_start(a, b, delay)* constrains at least the given delay to elapse between the start of act1 and the start of act2. It imposes the inequality startTime(a) + delay <= startTime(b).\n* *start_at_end(a, b, delay)* constrains the given delay to separate the start of a and the end of b. It imposes the equality startTime(a) + delay == endTime(b).\n* *start_at_start(a, b, delay)* constrains the given delay to separate the start of a and the start of b. It imposes the equality startTime(a) + delay == startTime(b).\n\nIf either interval *a* or *b* is not present in the solution, the constraint is automatically satisfied, and it is as if the constraint was never imposed.", "apps": [], "results": {"msg": [{"data": "<p>Precedence constraints are used to specify when an interval variable must start or end with respect to the start or end time of another interval variable. </p>\n<p></p>\n<p>The following types of precedence constraints are available; if <em>a</em> and <em>b</em> denote interval variables, both interval variables are present, and <em>delay</em> is a number or integer expression (0 by default), then:</p>\n<ul>\n<li><em>end_before_end(a, b, delay)</em> constrains at least the given delay to elapse between the end of a and the end of b. It imposes the inequality endTime(a) + delay &lt;= endTime(b).</li>\n</ul>\n<ul>\n<li><em>end_before_start(a, b, delay)</em> constrains at least the given delay to elapse between the end of a and the start of b. It imposes the inequality endTime(a) + delay &lt;= startTime(b).</li>\n</ul>\n<ul>\n<li><em>end_at_end(a, b, delay)</em> constrains the given delay to separate the end of a and the end of ab. It imposes the equality endTime(a) + delay == endTime(b).</li>\n</ul>\n<ul>\n<li><em>end_at_start(a, b, delay)</em> constrains the given delay to separate the end of a and the start of b. It imposes the equality endTime(a) + delay == startTime(b).</li>\n</ul>\n<ul>\n<li><em>start_before_end(a, b, delay)</em> constrains at least the given delay to elapse between the start of a and the end of b. It imposes the inequality startTime(a) + delay &lt;= endTime(b).</li>\n</ul>\n<ul>\n<li><em>start_before_start(a, b, delay)</em> constrains at least the given delay to elapse between the start of act1 and the start of act2. It imposes the inequality startTime(a) + delay &lt;= startTime(b).</li>\n</ul>\n<ul>\n<li><em>start_at_end(a, b, delay)</em> constrains the given delay to separate the start of a and the end of b. It imposes the equality startTime(a) + delay == endTime(b).</li>\n</ul>\n<ul>\n<li><em>start_at_start(a, b, delay)</em> constrains the given delay to separate the start of a and the start of b. It imposes the equality startTime(a) + delay == startTime(b).</li>\n</ul>\n<p></p>\n<p>If either interval <em>a</em> or <em>b</em> is not present in the solution, the constraint is automatically satisfied, and it is as if the constraint was never imposed.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nFor our model, precedence constraints can be added with the following code:", "apps": [], "results": {"msg": [{"data": "<p>For our model, precedence constraints can be added with the following code:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl1.add( mdl1.end_before_start(masonry, carpentry) )\nmdl1.add( mdl1.end_before_start(masonry, plumbing) )\nmdl1.add( mdl1.end_before_start(masonry, ceiling) )\nmdl1.add( mdl1.end_before_start(carpentry, roofing) )\nmdl1.add( mdl1.end_before_start(ceiling, painting) )\nmdl1.add( mdl1.end_before_start(roofing, windows) )\nmdl1.add( mdl1.end_before_start(roofing, facade) )\nmdl1.add( mdl1.end_before_start(plumbing, facade) )\nmdl1.add( mdl1.end_before_start(roofing, garden) )\nmdl1.add( mdl1.end_before_start(plumbing, garden) )\nmdl1.add( mdl1.end_before_start(windows, moving) )\nmdl1.add( mdl1.end_before_start(facade, moving) )\nmdl1.add( mdl1.end_before_start(garden, moving) )\nmdl1.add( mdl1.end_before_start(painting, moving) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTo model the cost for starting a task earlier than the preferred starting date, the expression *start_of()* can be used. \nIt represents the start of an interval variable as an integer expression.", "apps": [], "results": {"msg": [{"data": "<p>To model the cost for starting a task earlier than the preferred starting date, the expression <em>start_of()</em> can be used. </p>\n<p>It represents the start of an interval variable as an integer expression.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nFor each task that has an earliest preferred start date, the number of days before the preferred date it is scheduled to start can be determined using the expression *start_of()*.\nThis expression can be negative if the task starts after the preferred date. \nTaking the maximum of this value and 0 using *max()* allows to determine how many days early the task is scheduled to start. \nWeighting this value with the cost per day of starting early determines the cost associated with the task.\n\nThe cost for ending a task later than the preferred date is modeled in a similar manner using the expression *endOf()*. \nThe earliness and lateness costs can be summed to determine the total cost.", "apps": [], "results": {"msg": [{"data": "<p>For each task that has an earliest preferred start date, the number of days before the preferred date it is scheduled to start can be determined using the expression <em>start_of()</em>.</p>\n<p>This expression can be negative if the task starts after the preferred date. </p>\n<p>Taking the maximum of this value and 0 using <em>max()</em> allows to determine how many days early the task is scheduled to start. </p>\n<p>Weighting this value with the cost per day of starting early determines the cost associated with the task.</p>\n<p></p>\n<p>The cost for ending a task later than the preferred date is modeled in a similar manner using the expression <em>endOf()</em>. </p>\n<p>The earliness and lateness costs can be summed to determine the total cost.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 4: Add the objective\nThe objective function to be minimized can be written as follows:", "apps": [], "results": {"msg": [{"data": "<h2>Step 4: Add the objective</h2>\n<p>The objective function to be minimized can be written as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nobj = mdl1.minimize(  400 * mdl1.max([mdl1.end_of(moving) - 100, 0]) \n                    + 200 * mdl1.max([25 - mdl1.start_of(masonry), 0]) \n                    + 300 * mdl1.max([75 - mdl1.start_of(carpentry), 0]) \n                    + 100 * mdl1.max([75 - mdl1.start_of(ceiling), 0]) )\nmdl1.add(obj)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nSolving a problem consists of finding a value for each decision variable so that all constraints are satisfied. \nIt is not always know beforehand whether there is a solution that satisfies all the constraints of the problem. \nIn some cases, there may be no solution. In other cases, there may be many solutions to a problem.", "apps": [], "results": {"msg": [{"data": "<p>Solving a problem consists of finding a value for each decision variable so that all constraints are satisfied. </p>\n<p>It is not always know beforehand whether there is a solution that satisfies all the constraints of the problem. </p>\n<p>In some cases, there may be no solution. In other cases, there may be many solutions to a problem.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 5: Solve the model and display the solution", "apps": [], "results": {"msg": [{"data": "<h2>Step 5: Solve the model and display the solution</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol1 = mdl1.solve(url=url, key=key, TimeLimit=20)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol1:\n    print(\"Cost will be \" + str(msol1.get_objective_values()[0]))\n    \n    var_sol = msol1.get_var_solution(masonry)\n    print(\"Masonry : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(carpentry)\n    print(\"Carpentry : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(plumbing)\n    print(\"Plumbing : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(ceiling)\n    print(\"Ceiling : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(roofing)\n    print(\"Roofing : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(painting)\n    print(\"Painting : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(windows)\n    print(\"Windows : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(facade)\n    print(\"Facade : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\n    var_sol = msol1.get_var_solution(moving)\n    print(\"Moving : {}..{}\".format(var_sol.get_start(), var_sol.get_end()))\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nGraphical display of the same result is available with:", "apps": [], "results": {"msg": [{"data": "<p>Graphical display of the same result is available with:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport docplex.cp.utils_visu as visu\nimport matplotlib.pyplot as plt\n#Change the plot size\nfrom pylab import rcParams\nrcParams['figure.figsize'] = 15, 3", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol1:\n    wt = msol1.get_var_solution(masonry)   \n    visu.interval(wt, 'lightblue', 'masonry')   \n    wt = msol1.get_var_solution(carpentry)   \n    visu.interval(wt, 'lightblue', 'carpentry')\n    wt = msol1.get_var_solution(plumbing)   \n    visu.interval(wt, 'lightblue', 'plumbing')\n    wt = msol1.get_var_solution(ceiling)   \n    visu.interval(wt, 'lightblue', 'ceiling')\n    wt = msol1.get_var_solution(roofing)   \n    visu.interval(wt, 'lightblue', 'roofing')\n    wt = msol1.get_var_solution(painting)   \n    visu.interval(wt, 'lightblue', 'painting')\n    wt = msol1.get_var_solution(windows)   \n    visu.interval(wt, 'lightblue', 'windows')\n    wt = msol1.get_var_solution(facade)   \n    visu.interval(wt, 'lightblue', 'facade')\n    wt = msol1.get_var_solution(moving)   \n    visu.interval(wt, 'lightblue', 'moving')\n    visu.show()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe overall cost is 5000 and moving will be completed by day 110.", "apps": [], "results": {"msg": [{"data": "<p>The overall cost is 5000 and moving will be completed by day 110.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 3. Adding workers and transition times to the house building problem", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 3. Adding workers and transition times to the house building problem</h1>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis chapter introduces workers and transition times to the house building problem described in the previous chapters. It allows to learn the following concepts:\n* use the interval variable *sequence*;\n* use the constraints *span* and *no_overlap*;\n* use the expression *length_of*.\n\nThe problem to be solved is the scheduling of tasks involved in building *multiple* houses in a manner that minimizes the costs associated with completing each house after a given due date and with the length of time it takes to build each house. \nSome tasks must necessarily take place before other tasks, and each task has a predefined duration. \nEach house has an earliest starting date.\nMoreover, there are two workers, each of whom must perform a given subset of the necessary tasks, and there is a transition time associated with a worker transferring from one house to another house. \nA task, once started, cannot be interrupted. \n\nThe objective is to minimize the cost, which is composed of tardiness costs for certain tasks as well as a cost associated with the length of time it takes to complete each house. ", "apps": [], "results": {"msg": [{"data": "<p>This chapter introduces workers and transition times to the house building problem described in the previous chapters. It allows to learn the following concepts:</p>\n<ul>\n<li>use the interval variable <em>sequence</em>;</li>\n</ul>\n<ul>\n<li>use the constraints <em>span</em> and <em>no_overlap</em>;</li>\n</ul>\n<ul>\n<li>use the expression <em>length_of</em>.</li>\n</ul>\n<p></p>\n<p>The problem to be solved is the scheduling of tasks involved in building <em>multiple</em> houses in a manner that minimizes the costs associated with completing each house after a given due date and with the length of time it takes to build each house. </p>\n<p>Some tasks must necessarily take place before other tasks, and each task has a predefined duration. </p>\n<p>Each house has an earliest starting date.</p>\n<p>Moreover, there are two workers, each of whom must perform a given subset of the necessary tasks, and there is a transition time associated with a worker transferring from one house to another house. </p>\n<p>A task, once started, cannot be interrupted. </p>\n<p></p>\n<p>The objective is to minimize the cost, which is composed of tardiness costs for certain tasks as well as a cost associated with the length of time it takes to complete each house. </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Problem to be solved", "apps": [], "results": {"msg": [{"data": "<h2>Problem to be solved</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes a criterion. \nThe criterion for this problem is to minimize the tardiness costs associated with completing each house later than its specified due date and the cost associated with the length of time it takes to complete each house.\n\nFor each type of task, the following table shows the duration of the task in days along with the tasks that must be finished before the task can start. \nIn addition, each type of task must be performed by a specific worker, Jim or Joe. \nA worker can only work on one task at a time. \nA task, once started, may not be interrupted. \nThe time required to transfer from one house to another house is determined by a function based on the location of the two houses.", "apps": [], "results": {"msg": [{"data": "<p>The problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes a criterion. </p>\n<p>The criterion for this problem is to minimize the tardiness costs associated with completing each house later than its specified due date and the cost associated with the length of time it takes to complete each house.</p>\n<p></p>\n<p>For each type of task, the following table shows the duration of the task in days along with the tasks that must be finished before the task can start. </p>\n<p>In addition, each type of task must be performed by a specific worker, Jim or Joe. </p>\n<p>A worker can only work on one task at a time. </p>\n<p>A task, once started, may not be interrupted. </p>\n<p>The time required to transfer from one house to another house is determined by a function based on the location of the two houses.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe following table indicates these details for each task:\n\n| Task      | Duration | Worker | Preceding tasks   |\n|-----------|----------|--------|-------------------|\n| masonry   | 35       | Joe    |                   |\n| carpentry | 15       | Joe    | masonry           |\n| plumbing  | 40       | Jim    | masonry           |\n| ceiling   | 15       | Jim    | masonry           |\n| roofing   | 5        | Joe    | carpentry         |\n| painting  | 10       | Jim    | ceiling           |\n| windows   | 5        | Jim    | roofing           |\n| facade    | 10       | Joe    | roofing, plumbing |\n| garden    | 5        | Joe    | roofing, plumbing |\n| moving    | 5        | Jim    | windows, facade,garden, painting|", "apps": [], "results": {"msg": [{"data": "<p>The following table indicates these details for each task:</p>\n<p></p>\n<p>| Task      | Duration | Worker | Preceding tasks   |</p>\n<p>|-----------|----------|--------|-------------------|</p>\n<p>| masonry   | 35       | Joe    |                   |</p>\n<p>| carpentry | 15       | Joe    | masonry           |</p>\n<p>| plumbing  | 40       | Jim    | masonry           |</p>\n<p>| ceiling   | 15       | Jim    | masonry           |</p>\n<p>| roofing   | 5        | Joe    | carpentry         |</p>\n<p>| painting  | 10       | Jim    | ceiling           |</p>\n<p>| windows   | 5        | Jim    | roofing           |</p>\n<p>| facade    | 10       | Joe    | roofing, plumbing |</p>\n<p>| garden    | 5        | Joe    | roofing, plumbing |</p>\n<p>| moving    | 5        | Jim    | windows, facade,garden, painting|</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nFor each of the five houses that must be built, there is an earliest starting date, a due date and a cost per day of completing the house later than the preferred due date.", "apps": [], "results": {"msg": [{"data": "<p>For each of the five houses that must be built, there is an earliest starting date, a due date and a cost per day of completing the house later than the preferred due date.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe house construction tardiness costs is indicated in the following table:\n\n| House | Earliest start date | Preferred latest end date | Cost per day for ending late |\n|-------|---------------------|---------------------------|------------------------------|\n| 0     | 0                   | 120                       | 100.0                        |\n| 1     | 0                   | 212                       | 100.0                        |\n| 2     | 151                 | 304                       | 100.0                        |\n| 3     | 59                  | 181                       | 200.0                        |\n| 4     | 243                 | 425                       | 100.0                        |", "apps": [], "results": {"msg": [{"data": "<p>The house construction tardiness costs is indicated in the following table:</p>\n<p></p>\n<p>| House | Earliest start date | Preferred latest end date | Cost per day for ending late |</p>\n<p>|-------|---------------------|---------------------------|------------------------------|</p>\n<p>| 0     | 0                   | 120                       | 100.0                        |</p>\n<p>| 1     | 0                   | 212                       | 100.0                        |</p>\n<p>| 2     | 151                 | 304                       | 100.0                        |</p>\n<p>| 3     | 59                  | 181                       | 200.0                        |</p>\n<p>| 4     | 243                 | 425                       | 100.0                        |</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nSolving the problem consists of determining starting dates for the tasks such that the cost, where the cost is determined by the lateness costs and length costs, is minimized.", "apps": [], "results": {"msg": [{"data": "<p>Solving the problem consists of determining starting dates for the tasks such that the cost, where the cost is determined by the lateness costs and length costs, is minimized.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 1: Describe the problem\n\n* What is the known information in this problem ?\n\n    There are five houses to be built by two workers. For each house, there are ten house building tasks, each with a given duration, or size. Each house also has a given earliest starting date. For each task, there is a list of tasks that must be completed before the task can start. Each task must be performed by a given worker, and there is a transition time associated with a worker transferring from one house to another house. There are costs associated with completing eachhouse after its preferred due date and with the length of time it takes to complete each house.\n   \n   \n* What are the decision variables or unknowns in this problem ?\n\n   The unknowns are the start and end dates of the interval variables associated with the tasks. Once fixed, these interval variables also determine the cost of the solution. For some of the interval variables, there is a fixed minimum start date.\n\n\n* What are the constraints on these variables ?\n\n   There are constraints that specify a particular task may not begin until one or more given tasks have been completed. In addition, there are constraints that specify that a worker can be assigned to only one task at a time and that it takes time for a worker to travel from one house to the other.\n\n\n* What is the objective ?\n\n   The objective is to minimize the cost incurred through tardiness and length costs.", "apps": [], "results": {"msg": [{"data": "<h2>Step 1: Describe the problem</h2>\n<p></p>\n<ul>\n<li>What is the known information in this problem ?</li>\n</ul>\n<p></p>\n<pre><code>There are five houses to be built by two workers. For each house, there are ten house building tasks, each with a given duration, or size. Each house also has a given earliest starting date. For each task, there is a list of tasks that must be completed before the task can start. Each task must be performed by a given worker, and there is a transition time associated with a worker transferring from one house to another house. There are costs associated with completing eachhouse after its preferred due date and with the length of time it takes to complete each house.\n</code></pre>\n<p></p>\n<p></p>\n<ul>\n<li>What are the decision variables or unknowns in this problem ?</li>\n</ul>\n<p></p>\n<p>The unknowns are the start and end dates of the interval variables associated with the tasks. Once fixed, these interval variables also determine the cost of the solution. For some of the interval variables, there is a fixed minimum start date.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the constraints on these variables ?</li>\n</ul>\n<p></p>\n<p>There are constraints that specify a particular task may not begin until one or more given tasks have been completed. In addition, there are constraints that specify that a worker can be assigned to only one task at a time and that it takes time for a worker to travel from one house to the other.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What is the objective ?</li>\n</ul>\n<p></p>\n<p>The objective is to minimize the cost incurred through tardiness and length costs.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step2: Prepare data\nFirst coding step is to prepare model data:", "apps": [], "results": {"msg": [{"data": "<h2>Step2: Prepare data</h2>\n<p>First coding step is to prepare model data:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nNbHouses = 5\n\nWorkerNames = [\"Joe\", \"Jim\"]\n\nTaskNames = [\"masonry\", \"carpentry\", \"plumbing\", \n             \"ceiling\", \"roofing\", \"painting\", \n             \"windows\", \"facade\", \"garden\", \"moving\"]\n\nDuration =  [35, 15, 40, 15, 5, 10, 5, 10, 5, 5]\n\nWorker = {\"masonry\"  : \"Joe\" , \n          \"carpentry\": \"Joe\" , \n          \"plumbing\" : \"Jim\" , \n          \"ceiling\"  : \"Jim\" , \n          \"roofing\"  : \"Joe\" , \n          \"painting\" : \"Jim\" , \n          \"windows\"  : \"Jim\" , \n          \"facade\"   : \"Joe\" , \n          \"garden\"   : \"Joe\" , \n          \"moving\"   : \"Jim\"}\n\nReleaseDate = [  0,     0,   151,    59,   243]\nDueDate     = [120,   212,   304,   181,   425]\nWeight      = [100.0, 100.0, 100.0, 200.0, 100.0]\n\nPrecedences = [(\"masonry\", \"carpentry\"),(\"masonry\", \"plumbing\"),\n               (\"masonry\", \"ceiling\"), (\"carpentry\", \"roofing\"),\n               (\"ceiling\", \"painting\"), (\"roofing\", \"windows\"),  \n               (\"roofing\", \"facade\"), (\"plumbing\", \"facade\"),\n               (\"roofing\", \"garden\"), (\"plumbing\", \"garden\"),\n               (\"windows\", \"moving\"), (\"facade\", \"moving\"),  \n               (\"garden\", \"moving\"), (\"painting\", \"moving\")]\n\nHouses = range(NbHouses)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nOne part of the objective is based on the time it takes to build a house.\nTo model this, one interval variable is used for each house, and is later constrained to span the tasks associated with the given house. \nAs each house has an earliest starting date, and each house interval variable is declared to have a start date no earlier than that release date. \nThe ending date of the task is not constrained, so the upper value of the range for the variable is maxint.", "apps": [], "results": {"msg": [{"data": "<p>One part of the objective is based on the time it takes to build a house.</p>\n<p>To model this, one interval variable is used for each house, and is later constrained to span the tasks associated with the given house. </p>\n<p>As each house has an earliest starting date, and each house interval variable is declared to have a start date no earlier than that release date. </p>\n<p>The ending date of the task is not constrained, so the upper value of the range for the variable is maxint.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 3: Create the house interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 3: Create the house interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *\n\nmdl2 = CpoModel()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nhouses = [mdl2.interval_var(start=(ReleaseDate[i], INTERVAL_MAX), name=\"house\"+str(i)) for i in Houses]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 4: Create the task interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 4: Create the task interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nEach house has a list of tasks that must be scheduled. \nThe duration, or size, of each task t is Duration[t]. \nThis information allows to build the matrix *itvs* of interval variables.", "apps": [], "results": {"msg": [{"data": "<p>Each house has a list of tasks that must be scheduled. </p>\n<p>The duration, or size, of each task t is Duration[t]. </p>\n<p>This information allows to build the matrix <em>itvs</em> of interval variables.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nTaskNames_ids = {}\nitvs = {}\nfor h in Houses:\n    for i,t in enumerate(TaskNames):\n        _name = str(h)+\"_\"+str(t)\n        itvs[(h,t)] = mdl2.interval_var(size=Duration[i], name=_name)\n        TaskNames_ids[_name] = i", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 5: Add the precedence constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 5: Add the precedence constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe tasks of the house building project have precedence constraints that are added to the model.", "apps": [], "results": {"msg": [{"data": "<p>The tasks of the house building project have precedence constraints that are added to the model.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for p in Precedences:\n        mdl2.add(mdl2.end_before_start(itvs[(h,p[0])], itvs[(h,p[1])]) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTo model the cost associated with the length of time it takes to build a single house, the interval variable associated with the house is constrained to start at the start of the first task of the house and end at the end of the last task. \nThis interval variable must span the tasks.\n", "apps": [], "results": {"msg": [{"data": "<p>To model the cost associated with the length of time it takes to build a single house, the interval variable associated with the house is constrained to start at the start of the first task of the house and end at the end of the last task. </p>\n<p>This interval variable must span the tasks.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 6: Add the span constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 6: Add the span constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe constraint *span* allows to specify that one interval variable must exactly cover a set of interval variables.\nIn other words, the spanning interval is present in the solution if and only if at least one of the spanned interval variables is present and, in this case, the spanning interval variable starts at the start of the interval variable scheduled earliest in the set and ends at the end of the interval variable scheduled latest in the set.\n\nFor house *h*, the interval variable *houses[h]* is constrained to cover the interval variables in *itvs* that are associated with the tasks of the given house.", "apps": [], "results": {"msg": [{"data": "<p>The constraint <em>span</em> allows to specify that one interval variable must exactly cover a set of interval variables.</p>\n<p>In other words, the spanning interval is present in the solution if and only if at least one of the spanned interval variables is present and, in this case, the spanning interval variable starts at the start of the interval variable scheduled earliest in the set and ends at the end of the interval variable scheduled latest in the set.</p>\n<p></p>\n<p>For house <em>h</em>, the interval variable <em>houses[h]</em> is constrained to cover the interval variables in <em>itvs</em> that are associated with the tasks of the given house.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    mdl2.add( mdl2.span(houses[h], [itvs[(h,t)] for t in TaskNames] ) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 7: Create the transition times", "apps": [], "results": {"msg": [{"data": "<h2>Step 7: Create the transition times</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTransition times can be modeled using tuples with three elements. \nThe first element is the interval variable type of one task, the second is the interval variable type of the other task and the third element of the tuple is the transition time from the first to the second. \nAn integer interval variable type can be associated with each interval variable.\n\nGiven an interval variable *a1* that precedes (not necessarily directly) an interval variable *a2* in a sequence of non-overlapping interval variables, the transition time between *a1* and *a2* is an amount of time that must elapse between the end of *a1* and the beginning of *a2*.", "apps": [], "results": {"msg": [{"data": "<p>Transition times can be modeled using tuples with three elements. </p>\n<p>The first element is the interval variable type of one task, the second is the interval variable type of the other task and the third element of the tuple is the transition time from the first to the second. </p>\n<p>An integer interval variable type can be associated with each interval variable.</p>\n<p></p>\n<p>Given an interval variable <em>a1</em> that precedes (not necessarily directly) an interval variable <em>a2</em> in a sequence of non-overlapping interval variables, the transition time between <em>a1</em> and <em>a2</em> is an amount of time that must elapse between the end of <em>a1</em> and the beginning of <em>a2</em>.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\ntransitionTimes = transition_matrix([[int(abs(i - j)) for j in Houses] for i in Houses])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nEach of the tasks requires a particular worker. \nAs a worker can perform only one task at a time, it is necessary to know all of the tasks that a worker must perform and then constrain that these intervals not overlap and respect the transition times.\nA sequence variable represents the order in which the workers perform the tasks.\n\nNote that the sequence variable does not force the tasks to not overlap or the order of tasks. In a later step, a constraint is created that enforces these relations on the sequence of interval variables.", "apps": [], "results": {"msg": [{"data": "<p>Each of the tasks requires a particular worker. </p>\n<p>As a worker can perform only one task at a time, it is necessary to know all of the tasks that a worker must perform and then constrain that these intervals not overlap and respect the transition times.</p>\n<p>A sequence variable represents the order in which the workers perform the tasks.</p>\n<p></p>\n<p>Note that the sequence variable does not force the tasks to not overlap or the order of tasks. In a later step, a constraint is created that enforces these relations on the sequence of interval variables.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 8: Create the sequence variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 8: Create the sequence variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nUsing the decision variable type sequence, variable can be created to represent a sequence of interval variables. The sequence can contain a subset of the variables or be empty. \nIn a solution, the sequence will represent a total order over all the intervals in the set that are present in the solution. \nThe assigned order of interval variables in the sequence does not necessarily determine their relative positions in time in the schedule. \nThe sequence variable takes an array of interval variables as well as the transition types for each of those variables. \nInterval sequence variables are created for Jim and Joe, using the arrays of their tasks and the task locations.", "apps": [], "results": {"msg": [{"data": "<p>Using the decision variable type sequence, variable can be created to represent a sequence of interval variables. The sequence can contain a subset of the variables or be empty. </p>\n<p>In a solution, the sequence will represent a total order over all the intervals in the set that are present in the solution. </p>\n<p>The assigned order of interval variables in the sequence does not necessarily determine their relative positions in time in the schedule. </p>\n<p>The sequence variable takes an array of interval variables as well as the transition types for each of those variables. </p>\n<p>Interval sequence variables are created for Jim and Joe, using the arrays of their tasks and the task locations.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nworkers = {w : mdl2.sequence_var([ itvs[(h,t)] for h in Houses for t in TaskNames if Worker[t]==w ], \n                                types=[h for h in Houses for t in TaskNames if Worker[t]==w ], name=\"workers_\"+w)   \n           for w in WorkerNames}", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 9: Add the no overlap constraint", "apps": [], "results": {"msg": [{"data": "<h2>Step 9: Add the no overlap constraint</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nNow that the sequence variables have been created, each sequence must be constrained such that the interval variables do not overlap in the solution, that the transition times are respected, and that the sequence represents the relations of the interval variables in time. \n\nThe constraint *no_overlap* allows to constrain an interval sequence variable to define a chain of non-overlapping intervals that are present in the solution. \nIf a set of transition tuples is specified, it defines the minimal time that must elapse between two intervals in the chain.\nNote that intervals which are not present in the solution are automatically removed from the sequence.\nOne no overlap constraint is created for the sequence interval variable for each worker.", "apps": [], "results": {"msg": [{"data": "<p>Now that the sequence variables have been created, each sequence must be constrained such that the interval variables do not overlap in the solution, that the transition times are respected, and that the sequence represents the relations of the interval variables in time. </p>\n<p></p>\n<p>The constraint <em>no_overlap</em> allows to constrain an interval sequence variable to define a chain of non-overlapping intervals that are present in the solution. </p>\n<p>If a set of transition tuples is specified, it defines the minimal time that must elapse between two intervals in the chain.</p>\n<p>Note that intervals which are not present in the solution are automatically removed from the sequence.</p>\n<p>One no overlap constraint is created for the sequence interval variable for each worker.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor w in WorkerNames:\n    mdl2.add( mdl2.no_overlap(workers[w], transitionTimes) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe cost for building a house is the sum of the tardiness cost and the number of days it takes from start to finish building the house. \nTo model the cost associated with a task being completed later than its preferred latest end date, the expression *endOf()* can be used to determine the end date of the house interval variable. \nTo model the cost of the length of time it takes to build the house, the expression *lengthOf()* can be used, which returns an expression representing the length of an interval variable. ", "apps": [], "results": {"msg": [{"data": "<p>The cost for building a house is the sum of the tardiness cost and the number of days it takes from start to finish building the house. </p>\n<p>To model the cost associated with a task being completed later than its preferred latest end date, the expression <em>endOf()</em> can be used to determine the end date of the house interval variable. </p>\n<p>To model the cost of the length of time it takes to build the house, the expression <em>lengthOf()</em> can be used, which returns an expression representing the length of an interval variable. </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 10: Add the objective", "apps": [], "results": {"msg": [{"data": "<h2>Step 10: Add the objective</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe objective of this problem is to minimize the cost as represented by the cost expression.", "apps": [], "results": {"msg": [{"data": "<p>The objective of this problem is to minimize the cost as represented by the cost expression.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# create the obj and add it.\nmdl2.add( \n    mdl2.minimize( \n        mdl2.sum(Weight[h] * mdl2.max([0, mdl2.end_of(houses[h])-DueDate[h]]) + mdl2.length_of(houses[h]) for h in Houses) \n    ) \n)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 11: Solve the model", "apps": [], "results": {"msg": [{"data": "<h2>Step 11: Solve the model</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe search for an optimal solution in this problem can potentiality take a long time. A fail limit can be placed on the solve process to limit the search process. \nThe search stops when the fail limit is reached, even if optimality of the current best solution is not guaranteed. \nThe code for limiting the solve process is provided below:", "apps": [], "results": {"msg": [{"data": "<p>The search for an optimal solution in this problem can potentiality take a long time. A fail limit can be placed on the solve process to limit the search process. </p>\n<p>The search stops when the fail limit is reached, even if optimality of the current best solution is not guaranteed. </p>\n<p>The code for limiting the solve process is provided below:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol2 = mdl2.solve(url=url, key=key, FailLimit=30000)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol2:\n    print(\"Cost will be \" + str(msol2.get_objective_values()[0]))\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Viewing the results of sequencing problems in a Gantt chart\n# (double click on the gantt to see details)\nimport docplex.cp.utils_visu as visu\nimport matplotlib.pyplot as plt\n#Change the plot size\nfrom pylab import rcParams\nrcParams['figure.figsize'] = 15, 3\n\ndef showsequence(msol, s, setup, tp):\n    seq = msol.get_var_solution(s)\n    visu.sequence(name=s.get_name())\n    vs = seq.get_value()\n    for v in vs:\n        nm = v.get_name()\n        visu.interval(v, tp[TaskNames_ids[nm]], nm)\n    for i in range(len(vs) - 1):\n        end = vs[i].get_end()\n        tp1 = tp[TaskNames_ids[vs[i].get_name()]]\n        tp2 = tp[TaskNames_ids[vs[i + 1].get_name()]]\n        visu.transition(end, end + setup.get_value(tp1, tp2))\nif msol2:\n    visu.timeline(\"Solution for SchedSetup\")\n    for w in WorkerNames:\n        types=[h for h in Houses for t in TaskNames if Worker[t]==w]\n        showsequence(msol2, workers[w], transitionTimes, types)\n    visu.show()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 4. Adding calendars to the house building problem\n\nThis chapter introduces calendars into the house building problem, a problem of scheduling the tasks involved in building multiple houses in such a manner that minimizes the overall completion date of the houses.\n\nThere are two workers, each of whom must perform a given subset of the necessary tasks. \nEach worker has a calendar detailing on which days he does not work, such as weekends and holidays. \nOn a worker\u2019s day off, he does no work on his tasks, and his tasks may not be scheduled to start or end on these days. \nTasks that are in process by the worker are suspended during his days off.\n\nFollowing concepts are demonstrated:\n* use of the *step functions*,\n* use an alternative version of the constraint *no_overlap*,\n* use *intensity* expression,\n* use the constraints *forbid_start* and *forbid_end*,\n* use the *length* and *size* of an interval variable.", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 4. Adding calendars to the house building problem</h1>\n<p></p>\n<p>This chapter introduces calendars into the house building problem, a problem of scheduling the tasks involved in building multiple houses in such a manner that minimizes the overall completion date of the houses.</p>\n<p></p>\n<p>There are two workers, each of whom must perform a given subset of the necessary tasks. </p>\n<p>Each worker has a calendar detailing on which days he does not work, such as weekends and holidays. </p>\n<p>On a worker\u2019s day off, he does no work on his tasks, and his tasks may not be scheduled to start or end on these days. </p>\n<p>Tasks that are in process by the worker are suspended during his days off.</p>\n<p></p>\n<p>Following concepts are demonstrated:</p>\n<ul>\n<li>use of the <em>step functions</em>,</li>\n</ul>\n<ul>\n<li>use an alternative version of the constraint <em>no_overlap</em>,</li>\n</ul>\n<ul>\n<li>use <em>intensity</em> expression,</li>\n</ul>\n<ul>\n<li>use the constraints <em>forbid_start</em> and <em>forbid_end</em>,</li>\n</ul>\n<ul>\n<li>use the <em>length</em> and <em>size</em> of an interval variable.</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Problem to be solved\n\nThe problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes a criterion. \nThe criterion for this problem is to minimize the overall completion date.\nFor each task type in the house building project, the following table shows the size of the task in days along with the tasks that must be finished before the task can start. \nIn addition, each type of task can be performed by a given one of the two workers, Jim and Joe. \nA worker can only work on one task at a time. \nOnce started, Problem to be solveda task may be suspended during a worker\u2019s days off, but may not be interrupted by another task.", "apps": [], "results": {"msg": [{"data": "<h2>Problem to be solved</h2>\n<p></p>\n<p>The problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes a criterion. </p>\n<p>The criterion for this problem is to minimize the overall completion date.</p>\n<p>For each task type in the house building project, the following table shows the size of the task in days along with the tasks that must be finished before the task can start. </p>\n<p>In addition, each type of task can be performed by a given one of the two workers, Jim and Joe. </p>\n<p>A worker can only work on one task at a time. </p>\n<p>Once started, Problem to be solveda task may be suspended during a worker\u2019s days off, but may not be interrupted by another task.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction tasks are detailed in the folowing table:\n\n| Task      | Duration | Worker | Preceding tasks                   |\n|-----------|----------|--------|-----------------------------------|\n| masonry   | 35       |  Joe   |                                   |\n| carpentry | 15       |  Joe   | masonry                           |\n| plumbing  | 40       |  Jim   | masonry                           |\n| ceiling   | 15       |  Jim   | masonry                           |\n| roofing   |  5       |  Joe   | carpentry                         |\n| painting  | 10       |  Jim   | ceiling                           |\n| windows   |  5       |  Jim   | roofing                           |\n| facade    | 10       |  Joe   | roofing, plumbing                 |\n| garden    |  5       |  Joe   | roofing, plumbing                 |\n| moving    |  5       |  Jim   | windows, facade, garden, painting |", "apps": [], "results": {"msg": [{"data": "<p>House construction tasks are detailed in the folowing table:</p>\n<p></p>\n<p>| Task      | Duration | Worker | Preceding tasks                   |</p>\n<p>|-----------|----------|--------|-----------------------------------|</p>\n<p>| masonry   | 35       |  Joe   |                                   |</p>\n<p>| carpentry | 15       |  Joe   | masonry                           |</p>\n<p>| plumbing  | 40       |  Jim   | masonry                           |</p>\n<p>| ceiling   | 15       |  Jim   | masonry                           |</p>\n<p>| roofing   |  5       |  Joe   | carpentry                         |</p>\n<p>| painting  | 10       |  Jim   | ceiling                           |</p>\n<p>| windows   |  5       |  Jim   | roofing                           |</p>\n<p>| facade    | 10       |  Joe   | roofing, plumbing                 |</p>\n<p>| garden    |  5       |  Joe   | roofing, plumbing                 |</p>\n<p>| moving    |  5       |  Jim   | windows, facade, garden, painting |</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nSolving the problem consists of determining starting dates for the tasks such that\nthe overall completion date is minimized.", "apps": [], "results": {"msg": [{"data": "<p>Solving the problem consists of determining starting dates for the tasks such that</p>\n<p>the overall completion date is minimized.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 1: Describe the problem\n\nThe first step in modeling the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.\n\n* What is the known information in this problem ?\n\n   There are five houses to be built by two workers. For each house, there are ten house building tasks, each with a given size. For each task, there is a list of tasks that must be completed before the task can start. Each task must be performed by a given worker, and each worker has a calendar listing his days off.\n\n\n* What are the decision variables or unknowns in this problem ?\n\n   The unknowns are the start and end times of tasks which also determine the overall completion time. The actual length of a task depends on its position in time and on the calendar of the associated worker.\n   \n   \n* What are the constraints on these variables ?\n\n   There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. In addition, there are constraints that specify that a worker can be assigned to only one task at a time. A task cannot start or end during the associated worker\u2019s days off.\n\n\n* What is the objective ?\n\n   The objective is to minimize the overall completion date.", "apps": [], "results": {"msg": [{"data": "<h2>Step 1: Describe the problem</h2>\n<p></p>\n<p>The first step in modeling the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.</p>\n<p></p>\n<ul>\n<li>What is the known information in this problem ?</li>\n</ul>\n<p></p>\n<p>There are five houses to be built by two workers. For each house, there are ten house building tasks, each with a given size. For each task, there is a list of tasks that must be completed before the task can start. Each task must be performed by a given worker, and each worker has a calendar listing his days off.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the decision variables or unknowns in this problem ?</li>\n</ul>\n<p></p>\n<p>The unknowns are the start and end times of tasks which also determine the overall completion time. The actual length of a task depends on its position in time and on the calendar of the associated worker.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the constraints on these variables ?</li>\n</ul>\n<p></p>\n<p>There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. In addition, there are constraints that specify that a worker can be assigned to only one task at a time. A task cannot start or end during the associated worker\u2019s days off.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What is the objective ?</li>\n</ul>\n<p></p>\n<p>The objective is to minimize the overall completion date.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 2: Prepare data\nA scheduling model starts with the declaration of the engine as follows:", "apps": [], "results": {"msg": [{"data": "<h2>Step 2: Prepare data</h2>\n<p>A scheduling model starts with the declaration of the engine as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *\n\nmdl3 = CpoModel()\n\nNbHouses = 5;\n\nWorkerNames = [\"Joe\", \"Jim\" ]\n\nTaskNames = [\"masonry\",\"carpentry\",\"plumbing\",\"ceiling\",\"roofing\",\"painting\",\"windows\",\"facade\",\"garden\",\"moving\"]\n\nDuration =  [35,15,40,15,5,10,5,10,5,5]\n\nWorker = {\"masonry\":\"Joe\",\"carpentry\":\"Joe\",\"plumbing\":\"Jim\",\"ceiling\":\"Jim\",\n          \"roofing\":\"Joe\",\"painting\":\"Jim\",\"windows\":\"Jim\",\"facade\":\"Joe\",\n          \"garden\":\"Joe\",\"moving\":\"Jim\"}\n\n\nPrecedences = { (\"masonry\",\"carpentry\"),(\"masonry\",\"plumbing\"),\n               (\"masonry\",\"ceiling\"),(\"carpentry\",\"roofing\"),\n               (\"ceiling\",\"painting\"),(\"roofing\",\"windows\"),\n               (\"roofing\",\"facade\"),(\"plumbing\",\"facade\"),\n               (\"roofing\",\"garden\"),(\"plumbing\",\"garden\"),\n               (\"windows\",\"moving\"),(\"facade\",\"moving\"),  \n               (\"garden\",\"moving\"),(\"painting\",\"moving\") }", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 3: Add the intensity step functions", "apps": [], "results": {"msg": [{"data": "<h2>Step 3: Add the intensity step functions</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTo model the availability of a worker with respect to his days off, a step function is created to represents his intensity over time. \nThis function has a range of [0..100], where the value 0 represents that the worker is not available and the value 100 represents that the worker is available with regard to his calendar.\n\nStep functions are created by the method *step_function()*.\nEach interval [x1, x2) on which the function has the same value is called a step. \nWhen two consecutive steps of the function have the same value, these steps are merged so that the function is always represented with the minimal number of steps.\n\nFor each worker, a sorted tupleset is created. At each point in time where the worker\u2019s availability changes, a tuple is created. \nThe tuple has two elements; the first element is an integer value that represents the worker\u2019s availability (0 for on a break, 100 for fully available to work, 50 for a half-day), and the other element represents the date at which the availability changes to this value. \nThis tupleset, sorted by date, is then used to create a step function to represent the worker\u2019s intensity over time. \nThe value of the function after the final step is set to 100.", "apps": [], "results": {"msg": [{"data": "<p>To model the availability of a worker with respect to his days off, a step function is created to represents his intensity over time. </p>\n<p>This function has a range of [0..100], where the value 0 represents that the worker is not available and the value 100 represents that the worker is available with regard to his calendar.</p>\n<p></p>\n<p>Step functions are created by the method <em>step_function()</em>.</p>\n<p>Each interval [x1, x2) on which the function has the same value is called a step. </p>\n<p>When two consecutive steps of the function have the same value, these steps are merged so that the function is always represented with the minimal number of steps.</p>\n<p></p>\n<p>For each worker, a sorted tupleset is created. At each point in time where the worker\u2019s availability changes, a tuple is created. </p>\n<p>The tuple has two elements; the first element is an integer value that represents the worker\u2019s availability (0 for on a break, 100 for fully available to work, 50 for a half-day), and the other element represents the date at which the availability changes to this value. </p>\n<p>This tupleset, sorted by date, is then used to create a step function to represent the worker\u2019s intensity over time. </p>\n<p>The value of the function after the final step is set to 100.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nBreaks ={\n  \"Joe\" : [\n     (5,14),(19,21),(26,28),(33,35),(40,42),(47,49),(54,56),(61,63),\n     (68,70),(75,77),(82,84),(89,91),(96,98),(103,105),(110,112),(117,119),\n     (124,133),(138,140),(145,147),(152,154),(159,161),(166,168),(173,175),\n     (180,182),(187,189),(194,196),(201,203),(208,210),(215,238),(243,245),(250,252),\n     (257,259),(264,266),(271,273),(278,280),(285,287),(292,294),(299,301),\n     (306,308),(313,315),(320,322),(327,329),(334,336),(341,343),(348,350),\n     (355,357),(362,364),(369,378),(383,385),(390,392),(397,399),(404,406),(411,413),\n     (418,420),(425,427),(432,434),(439,441),(446,448),(453,455),(460,462),(467,469),\n     (474,476),(481,483),(488,490),(495,504),(509,511),(516,518),(523,525),(530,532),\n     (537,539),(544,546),(551,553),(558,560),(565,567),(572,574),(579,602),(607,609),\n     (614,616),(621,623),(628,630),(635,637),(642,644),(649,651),(656,658),(663,665),\n     (670,672),(677,679),(684,686),(691,693),(698,700),(705,707),(712,714),\n     (719,721),(726,728)\n  ],\n  \"Jim\" : [\n     (5,7),(12,14),(19,21),(26,42),(47,49),(54,56),(61,63),(68,70),(75,77),\n     (82,84),(89,91),(96,98),(103,105),(110,112),(117,119),(124,126),(131,133),\n     (138,140),(145,147),(152,154),(159,161),(166,168),(173,175),(180,182),(187,189),\n     (194,196),(201,225),(229,231),(236,238),(243,245),(250,252),(257,259),\n     (264,266),(271,273),(278,280),(285,287),(292,294),(299,301),(306,315),\n     (320,322),(327,329),(334,336),(341,343),(348,350),(355,357),(362,364),(369,371),\n     (376,378),(383,385),(390,392),(397,413),(418,420),(425,427),(432,434),(439,441),\n     (446,448),(453,455),(460,462),(467,469),(474,476),(481,483),(488,490),(495,497),\n     (502,504),(509,511),(516,518),(523,525),(530,532),(537,539),(544,546),\n     (551,553),(558,560),(565,581),(586,588),(593,595),(600,602),(607,609),\n     (614,616),(621,623),(628,630),(635,637),(642,644),(649,651),(656,658),\n     (663,665),(670,672),(677,679),(684,686),(691,693),(698,700),(705,707),\n     (712,714),(719,721),(726,728)]\n  }", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfrom collections import namedtuple\nBreak = namedtuple('Break', ['start', 'end'])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nCalendar = {}\nmymax = max(max(v for k,v in Breaks[w]) for w in WorkerNames)\nfor w in WorkerNames:\n    step = CpoStepFunction()\n    step.set_value(0, mymax, 100)\n    for b in Breaks[w]:\n        t = Break(*b)\n        step.set_value(t.start, t.end, 0)\n    Calendar[w] = step", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis intensity function is used in creating the task variables for the workers. \nThe intensity step function of the appropriate worker is passed to the creation of each interval variable. \nThe size of the interval variable is the time spent at the house to process the task, not including the worker\u2019s day off. \nThe length is the difference between the start and the end of the interval.", "apps": [], "results": {"msg": [{"data": "<p>This intensity function is used in creating the task variables for the workers. </p>\n<p>The intensity step function of the appropriate worker is passed to the creation of each interval variable. </p>\n<p>The size of the interval variable is the time spent at the house to process the task, not including the worker\u2019s day off. </p>\n<p>The length is the difference between the start and the end of the interval.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 4: Create the interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 4: Create the interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n#TaskNames_ids = {}\nitvs = {}\nfor h in Houses:\n    for i,t in enumerate(TaskNames):\n        _name = str(h) + \"_\" + str(t)\n        itvs[(h,t)] = mdl3.interval_var(size=Duration[i], intensity=Calendar[Worker[t]], name=_name)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe tasks of the house building project have precedence constraints that are added to the model.", "apps": [], "results": {"msg": [{"data": "<p>The tasks of the house building project have precedence constraints that are added to the model.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 5: Add the precedence constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 5: Add the precedence constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for p in Precedences:\n        mdl3.add( mdl3.end_before_start(itvs[h,p[0]], itvs[h,p[1]]) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 6: Add the no overlap constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 6: Add the no overlap constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTo add the constraints that a worker can perform only one task at a time, the interval variables associated with that worker are constrained to not overlap in the solution. \nTo do this, the specialized constraint *no_overlap()* is used, but with a slightly different form than was used in the section Chapter 3, \u201cAdding workers and transition times to the house building problem,\u201d.\n\nThis form is a shortcut that avoids the need to explicitly define the interval sequence variable when no additional constraints are required on the sequence variable. A single *no_overlap()* constraint is added on the array of interval variables for each worker.", "apps": [], "results": {"msg": [{"data": "<p>To add the constraints that a worker can perform only one task at a time, the interval variables associated with that worker are constrained to not overlap in the solution. </p>\n<p>To do this, the specialized constraint <em>no_overlap()</em> is used, but with a slightly different form than was used in the section Chapter 3, \u201cAdding workers and transition times to the house building problem,\u201d.</p>\n<p></p>\n<p>This form is a shortcut that avoids the need to explicitly define the interval sequence variable when no additional constraints are required on the sequence variable. A single <em>no_overlap()</em> constraint is added on the array of interval variables for each worker.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor w in WorkerNames:\n    mdl3.add( mdl3.no_overlap( [itvs[h,t] for h in Houses for t in TaskNames if Worker[t]==w]  ) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 7: Create the forbidden start and end constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 7: Create the forbidden start and end constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nWhen an intensity function is set on an interval variable, the tasks which overlap weekends and/or holidays will be automatically prolonged. \nA task could still be scheduled to start or end in a weekend, but, in this problem, a worker\u2019s tasks cannot start or end during the worker\u2019s days off. \n*CP Optimizer* provides the constraints *forbid_start* and *forbid_end* to model these types of constraints.\n\nWith the constraint *forbid_start*, a constraint is created to specifies that an interval variable must not be scheduled to start at certain times.\nThe constraint takes as parameters an interval variable and a step function. \nIf the interval variable is present in the solution, then it is constrained to not start at a time when the value of the step function is zero.\n\n*CP Optimizer* also provides *forbid_end* and *forbid_extent*, which respectively constrain an interval variable to not end and not overlap where the associated step function is valued zero.\nThe first argument of the constraint *forbid_start* is the interval variable on which the constraint is placed.\nThe second argument is the step function that defines a set of forbidden values for the start of the interval variable: the interval variable cannot start at a point where the step function is 0.", "apps": [], "results": {"msg": [{"data": "<p>When an intensity function is set on an interval variable, the tasks which overlap weekends and/or holidays will be automatically prolonged. </p>\n<p>A task could still be scheduled to start or end in a weekend, but, in this problem, a worker\u2019s tasks cannot start or end during the worker\u2019s days off. </p>\n<p><em>CP Optimizer</em> provides the constraints <em>forbid_start</em> and <em>forbid_end</em> to model these types of constraints.</p>\n<p></p>\n<p>With the constraint <em>forbid_start</em>, a constraint is created to specifies that an interval variable must not be scheduled to start at certain times.</p>\n<p>The constraint takes as parameters an interval variable and a step function. </p>\n<p>If the interval variable is present in the solution, then it is constrained to not start at a time when the value of the step function is zero.</p>\n<p></p>\n<p><em>CP Optimizer</em> also provides <em>forbid_end</em> and <em>forbid_extent</em>, which respectively constrain an interval variable to not end and not overlap where the associated step function is valued zero.</p>\n<p>The first argument of the constraint <em>forbid_start</em> is the interval variable on which the constraint is placed.</p>\n<p>The second argument is the step function that defines a set of forbidden values for the start of the interval variable: the interval variable cannot start at a point where the step function is 0.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for t in TaskNames:\n        mdl3.add(mdl3.forbid_start(itvs[h,t], Calendar[Worker[t]]))\n        mdl3.add(mdl3.forbid_end (itvs[h,t], Calendar[Worker[t]]))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 8: Create the objective", "apps": [], "results": {"msg": [{"data": "<h2>Step 8: Create the objective</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe objective of this problem is to minimize the overall completion date (the completion date of the house that is completed last). \nThe maximum completion date among the individual house projects is determined using the expression *end_of()* on the last task in building each house (here, it is the moving task) and minimize the maximum of these expressions.", "apps": [], "results": {"msg": [{"data": "<p>The objective of this problem is to minimize the overall completion date (the completion date of the house that is completed last). </p>\n<p>The maximum completion date among the individual house projects is determined using the expression <em>end_of()</em> on the last task in building each house (here, it is the moving task) and minimize the maximum of these expressions.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl3.add( mdl3.minimize(mdl3.max(mdl3.end_of(itvs[h,\"moving\"]) for h in Houses)))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 9: Solve the model", "apps": [], "results": {"msg": [{"data": "<h2>Step 9: Solve the model</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. \nThe search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. \nThe code for limiting the solve process is provided below:", "apps": [], "results": {"msg": [{"data": "<p>The search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. </p>\n<p>The search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. </p>\n<p>The code for limiting the solve process is provided below:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol3 = mdl3.solve(url=url, key=key, FailLimit=30000)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol3:\n    print(\"Cost will be \" + str( msol3.get_objective_values()[0] ))    # Allocate tasks to workers\n    tasks = {w : [] for w in WorkerNames}\n    for k,v in Worker.items():\n        tasks[v].append(k)\n\n    types = {t : i for i,t in enumerate(TaskNames)}\n\n    import docplex.cp.utils_visu as visu\n    import matplotlib.pyplot as plt\n        #Change the plot size\n    from pylab import rcParams\n    rcParams['figure.figsize'] = 15, 3\n\n    visu.timeline('Solution SchedCalendar')\n    for w in WorkerNames:\n        visu.panel()\n        visu.pause(Calendar[w])\n        visu.sequence(name=w,\n                      intervals=[(msol3.get_var_solution(itvs[h,t]), types[t], t) for t in tasks[w] for h in Houses])\n    visu.show()\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 5. Using cumulative functions in the house building problem\n\nSome tasks must necessarily take place before other tasks, and each task has a predefined duration. \nMoreover, there are three workers, and each task requires any one of the three workers. \nA worker can be assigned to at most one task at a time. \nIn addition, there is a cash budget with a starting balance. \nEach task consumes a certain amount of the budget at the start of the task, and the cash balance is increased every 60 days. \n\nThis chapter introduces:\n* use the modeling function *cumul_function*,\n* use the functions *pulse*, *step*, *step_at_start* and *step_at_end*.\n\n", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 5. Using cumulative functions in the house building problem</h1>\n<p></p>\n<p>Some tasks must necessarily take place before other tasks, and each task has a predefined duration. </p>\n<p>Moreover, there are three workers, and each task requires any one of the three workers. </p>\n<p>A worker can be assigned to at most one task at a time. </p>\n<p>In addition, there is a cash budget with a starting balance. </p>\n<p>Each task consumes a certain amount of the budget at the start of the task, and the cash balance is increased every 60 days. </p>\n<p></p>\n<p>This chapter introduces:</p>\n<ul>\n<li>use the modeling function <em>cumul_function</em>,</li>\n</ul>\n<ul>\n<li>use the functions <em>pulse</em>, <em>step</em>, <em>step_at_start</em> and <em>step_at_end</em>.</li>\n</ul>\n<p></p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Problem to be solved\n\nThe problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes a criterion. The criterion\nfor this problem is to minimize the overall completion date. Each task requires 200 dollars per day of the task, payable at the start of the task. Every 60 days, starting\nat day 0, the amount of 30,000 dollars is added to the cash balance.\n\nFor each task type in the house building project, the following table shows the duration of the task in days along with the tasks that must be finished before the task can start. Each task requires any one of the three workers. A worker can only work on one task at a time; each task, once started, may not be interrupted.", "apps": [], "results": {"msg": [{"data": "<h2>Problem to be solved</h2>\n<p></p>\n<p>The problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes a criterion. The criterion</p>\n<p>for this problem is to minimize the overall completion date. Each task requires 200 dollars per day of the task, payable at the start of the task. Every 60 days, starting</p>\n<p>at day 0, the amount of 30,000 dollars is added to the cash balance.</p>\n<p></p>\n<p>For each task type in the house building project, the following table shows the duration of the task in days along with the tasks that must be finished before the task can start. Each task requires any one of the three workers. A worker can only work on one task at a time; each task, once started, may not be interrupted.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction tasks:\n\n| Task      | Duration | Preceding tasks      |\n|-----------|----------|----------------------|\n| masonry   | 35       |                      | \n| carpentry | 15       |  masonry             | \n| plumbing  | 40       |  masonry             | \n| ceiling   | 15       |  masonry             | \n| roofingv  |  5       |  carpentry           | \n| painting  | 10       |  ceiling             | \n| windows   |  5       |  roofing             | \n| facade    | 10       |  roofing, plumbing   | \n| garden    |  5       | roofing, plumbing    | \n| moving    |  5       |  windows, facade, garden,painting | ", "apps": [], "results": {"msg": [{"data": "<p>House construction tasks:</p>\n<p></p>\n<p>| Task      | Duration | Preceding tasks      |</p>\n<p>|-----------|----------|----------------------|</p>\n<p>| masonry   | 35       |                      | </p>\n<p>| carpentry | 15       |  masonry             | </p>\n<p>| plumbing  | 40       |  masonry             | </p>\n<p>| ceiling   | 15       |  masonry             | </p>\n<p>| roofingv  |  5       |  carpentry           | </p>\n<p>| painting  | 10       |  ceiling             | </p>\n<p>| windows   |  5       |  roofing             | </p>\n<p>| facade    | 10       |  roofing, plumbing   | </p>\n<p>| garden    |  5       | roofing, plumbing    | </p>\n<p>| moving    |  5       |  windows, facade, garden,painting | </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThere is an earliest starting date for each of the five houses that must be built.\n\n| House | Earliest starting date |\n|---|----|\n| 0 | 31 |\n| 1 | 0  |\n| 2 | 90 |\n| 3 | 120|\n| 4 | 90 |\nSolving the problem consists of determining starting dates for the tasks such that\nthe overall completion date is minimized.", "apps": [], "results": {"msg": [{"data": "<p>There is an earliest starting date for each of the five houses that must be built.</p>\n<p></p>\n<p>| House | Earliest starting date |</p>\n<p>|---|----|</p>\n<p>| 0 | 31 |</p>\n<p>| 1 | 0  |</p>\n<p>| 2 | 90 |</p>\n<p>| 3 | 120|</p>\n<p>| 4 | 90 |</p>\n<p>Solving the problem consists of determining starting dates for the tasks such that</p>\n<p>the overall completion date is minimized.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 1: Describe the problem\n\nThe first step in modeling and solving the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.\n\n* What is the known information in this problem ?\n\n   There are five houses to be built by three workers. For each house, there are ten house building tasks, each with a given size and cost. For each task, there is a list of tasks that must be completed before the task can start. There is a starting cash balance of a given amount, and, each sixty days, the cash balance is increased by a given amount.\n\n\n* What are the decision variables or unknowns in this problem ?\n\n   The unknown is the point in time that each task will start. Once starting dates have been fixed, the overall completion date will also be fixed.\n\n\n* What are the constraints on these variables ?\n\n   There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. Each task requires any one of the three workers. In addition, there are constraints that specify that a worker can be assigned to only one task at a time. Before a task can start, the cash balance must be large enough to pay the cost of the task.\n\n\n* What is the objective ?\n\n   The objective is to minimize the overall completion date.", "apps": [], "results": {"msg": [{"data": "<h2>Step 1: Describe the problem</h2>\n<p></p>\n<p>The first step in modeling and solving the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.</p>\n<p></p>\n<ul>\n<li>What is the known information in this problem ?</li>\n</ul>\n<p></p>\n<p>There are five houses to be built by three workers. For each house, there are ten house building tasks, each with a given size and cost. For each task, there is a list of tasks that must be completed before the task can start. There is a starting cash balance of a given amount, and, each sixty days, the cash balance is increased by a given amount.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the decision variables or unknowns in this problem ?</li>\n</ul>\n<p></p>\n<p>The unknown is the point in time that each task will start. Once starting dates have been fixed, the overall completion date will also be fixed.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the constraints on these variables ?</li>\n</ul>\n<p></p>\n<p>There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. Each task requires any one of the three workers. In addition, there are constraints that specify that a worker can be assigned to only one task at a time. Before a task can start, the cash balance must be large enough to pay the cost of the task.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What is the objective ?</li>\n</ul>\n<p></p>\n<p>The objective is to minimize the overall completion date.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 2: Prepare data\nIn the related data file, the data provided includes the number of houses (NbHouses), the number of workers (NbWorkers), the names of the tasks (TaskNames), the sizes of the tasks (Duration), the precedence relations (Precedences), and the earliest start dates of the houses (ReleaseDate).\n\nAs each house has an earliest starting date, the task interval variables are declared to have a start date no earlier than that release date of the associated house. The ending dates of the tasks are not constrained, so the upper value of the range for the variables is maxint.", "apps": [], "results": {"msg": [{"data": "<h2>Step 2: Prepare data</h2>\n<p>In the related data file, the data provided includes the number of houses (NbHouses), the number of workers (NbWorkers), the names of the tasks (TaskNames), the sizes of the tasks (Duration), the precedence relations (Precedences), and the earliest start dates of the houses (ReleaseDate).</p>\n<p></p>\n<p>As each house has an earliest starting date, the task interval variables are declared to have a start date no earlier than that release date of the associated house. The ending dates of the tasks are not constrained, so the upper value of the range for the variables is maxint.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nNbWorkers = 3\nNbHouses  = 5\n\nTaskNames = {\"masonry\",\"carpentry\",\"plumbing\",\n             \"ceiling\",\"roofing\",\"painting\",\n             \"windows\",\"facade\",\"garden\",\"moving\"}\n\nDuration =  [35, 15, 40, 15, 5, 10, 5, 10, 5, 5]\n\nReleaseDate = [31, 0, 90, 120, 90]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nPrecedences = [(\"masonry\", \"carpentry\"), (\"masonry\", \"plumbing\"), (\"masonry\", \"ceiling\"),\n               (\"carpentry\", \"roofing\"), (\"ceiling\", \"painting\"), (\"roofing\", \"windows\"),\n               (\"roofing\", \"facade\"), (\"plumbing\", \"facade\"), (\"roofing\", \"garden\"),\n               (\"plumbing\", \"garden\"), (\"windows\", \"moving\"), (\"facade\", \"moving\"),\n               (\"garden\", \"moving\"), (\"painting\", \"moving\")]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 3: Create the interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 3: Create the interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl4 = CpoModel()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nitvs = {}\nfor h in Houses:\n    for i,t in enumerate(TaskNames):\n        itvs[h,t] = mdl4.interval_var(start = [ReleaseDate[h], INTERVAL_MAX], size=Duration[i])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nAs the workers are equivalent in this problem, it is better to represent them as one pool of workers instead of as individual workers with no overlap constraints as was done in the earlier examples. \nThe expression representing usage of this pool of workers can be modified by the interval variables that require a worker.\n\nTo model both the limited number of workers and the limited budget, we need to represent the sum of the individual contributions associated with the interval variables. \nIn the case of the cash budget, some tasks consume some of the budget at the start. \nIn the case of the workers, a task requires the worker only for the duration of the task.\n", "apps": [], "results": {"msg": [{"data": "<p>As the workers are equivalent in this problem, it is better to represent them as one pool of workers instead of as individual workers with no overlap constraints as was done in the earlier examples. </p>\n<p>The expression representing usage of this pool of workers can be modified by the interval variables that require a worker.</p>\n<p></p>\n<p>To model both the limited number of workers and the limited budget, we need to represent the sum of the individual contributions associated with the interval variables. </p>\n<p>In the case of the cash budget, some tasks consume some of the budget at the start. </p>\n<p>In the case of the workers, a task requires the worker only for the duration of the task.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 4: Declare the worker usage function", "apps": [], "results": {"msg": [{"data": "<h2>Step 4: Declare the worker usage function</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nA **cumulative function** expression, can be used to model a resource usage function over time. \nThis function can be computed as a sum of interval variable demands on a resource over time.\nAn interval usually increases the cumulated resource usage function at its start time and decreases it when it releases the resource at its end time (pulse function).\nFor resources that can be produced and consumed by activities (for instance the contents of an inventory or a tank), the resource level can also be described as a function of time. \nA production activity will increase the resource level at the start or end time of the activity whereas a consuming activity will decrease it. \nThe cumulated contribution of activities on the resource can be represented by a function of time, and constraints can be modeled on this function (for instance, a maximal or a safety level).", "apps": [], "results": {"msg": [{"data": "<p>A <strong>cumulative function</strong> expression, can be used to model a resource usage function over time. </p>\n<p>This function can be computed as a sum of interval variable demands on a resource over time.</p>\n<p>An interval usually increases the cumulated resource usage function at its start time and decreases it when it releases the resource at its end time (pulse function).</p>\n<p>For resources that can be produced and consumed by activities (for instance the contents of an inventory or a tank), the resource level can also be described as a function of time. </p>\n<p>A production activity will increase the resource level at the start or end time of the activity whereas a consuming activity will decrease it. </p>\n<p>The cumulated contribution of activities on the resource can be represented by a function of time, and constraints can be modeled on this function (for instance, a maximal or a safety level).</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe value of the expression at any given moment in time is constrained to be non-negative. A cumulative function expression can be modified with the atomic demand functions:\n* *step()*, which increases or decreases the level of the function by a given amount at a given time,\n* *pulse()*, which increases or decreases the level of the function by a given amount for the length of a given interval variable or fixed interval,\n* *step_at_start()*, which increases or decreases the level of the function by a given amount at the start of a given interval variable,\n* *step_at_end()*, which increases or decreases the level of the function by a given amount at the end of a given interval variable.\n\nA cumulative function expression can be constrained to model limited resource capacity by constraining that the function be \u2264 the capacity.\n\nTwo cumulative functions are required, one to represent the usage of the workers and the other to represent the cash balance.\nEach task requires one worker from the start to the end of the task interval. \n\nA cumulative function expression, *workerUsage* is used to represent the fact that a worker is required for the task.\nThis function is constrained to not exceed the number of workers at any point in time. \nThe function *pulse()* adjusts the expression by a given amount on the interval. \nSumming these pulse atoms over all the interval variables results in an expression that represents worker usage over the entire time frame for building the houses.", "apps": [], "results": {"msg": [{"data": "<p>The value of the expression at any given moment in time is constrained to be non-negative. A cumulative function expression can be modified with the atomic demand functions:</p>\n<ul>\n<li><em>step()</em>, which increases or decreases the level of the function by a given amount at a given time,</li>\n</ul>\n<ul>\n<li><em>pulse()</em>, which increases or decreases the level of the function by a given amount for the length of a given interval variable or fixed interval,</li>\n</ul>\n<ul>\n<li><em>step_at_start()</em>, which increases or decreases the level of the function by a given amount at the start of a given interval variable,</li>\n</ul>\n<ul>\n<li><em>step_at_end()</em>, which increases or decreases the level of the function by a given amount at the end of a given interval variable.</li>\n</ul>\n<p></p>\n<p>A cumulative function expression can be constrained to model limited resource capacity by constraining that the function be \u2264 the capacity.</p>\n<p></p>\n<p>Two cumulative functions are required, one to represent the usage of the workers and the other to represent the cash balance.</p>\n<p>Each task requires one worker from the start to the end of the task interval. </p>\n<p></p>\n<p>A cumulative function expression, <em>workerUsage</em> is used to represent the fact that a worker is required for the task.</p>\n<p>This function is constrained to not exceed the number of workers at any point in time. </p>\n<p>The function <em>pulse()</em> adjusts the expression by a given amount on the interval. </p>\n<p>Summing these pulse atoms over all the interval variables results in an expression that represents worker usage over the entire time frame for building the houses.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nworkers_usage = step_at(0, 0)\nfor h in Houses:\n    for t in TaskNames:\n        workers_usage += mdl4.pulse(itvs[h,t],1)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 5: Declare the cash budget function", "apps": [], "results": {"msg": [{"data": "<h2>Step 5: Declare the cash budget function</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nA cumulative function *cach* is also used to model the cash budget. \nTo set the initial cash balance of 30,000 dollars and increase the balance by 30,000 every sixty days, the function *step_at()* is used to increment or decrement the cumulative function expression by a fixed amount on a given date.\n\nEach task requires a cash payment equal to 200 dollars a day for the length of the task, payable at the start of the task. \nThe function *step_at_start()* is used to adjust the cash balance cumulative function expression the appropriate amount for every task.", "apps": [], "results": {"msg": [{"data": "<p>A cumulative function <em>cach</em> is also used to model the cash budget. </p>\n<p>To set the initial cash balance of 30,000 dollars and increase the balance by 30,000 every sixty days, the function <em>step_at()</em> is used to increment or decrement the cumulative function expression by a fixed amount on a given date.</p>\n<p></p>\n<p>Each task requires a cash payment equal to 200 dollars a day for the length of the task, payable at the start of the task. </p>\n<p>The function <em>step_at_start()</em> is used to adjust the cash balance cumulative function expression the appropriate amount for every task.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\ncash = step_at(0, 0)\nfor p in Houses:\n    cash += mdl4.step_at(60*p, 30000)\n\nfor h in Houses:\n    for i,t in enumerate(TaskNames):\n        cash -= mdl4.step_at_start(itvs[h,t], 200*Duration[i])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 6: Add the temporal constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 6: Add the temporal constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe tasks have precedence constraints that are added to the model.", "apps": [], "results": {"msg": [{"data": "<p>The tasks have precedence constraints that are added to the model.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for p in Precedences:\n        mdl4.add( mdl4.end_before_start(itvs[h,p[0]], itvs[h,p[1]]) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 7: Add the worker usage constraint", "apps": [], "results": {"msg": [{"data": "<h2>Step 7: Add the worker usage constraint</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThere is a limited number of workers, and the cumulative function expression representing worker usage must be constrained to not be greater than the number of workers..", "apps": [], "results": {"msg": [{"data": "<p>There is a limited number of workers, and the cumulative function expression representing worker usage must be constrained to not be greater than the number of workers..</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl4.add( workers_usage <= NbWorkers )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 8: Add the cash budget constraint", "apps": [], "results": {"msg": [{"data": "<h2>Step 8: Add the cash budget constraint</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe budget must always be nonnegative, and the cumulative function expression representing the cash budget must be greater than 0.", "apps": [], "results": {"msg": [{"data": "<p>The budget must always be nonnegative, and the cumulative function expression representing the cash budget must be greater than 0.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl4.add( cash >= 0 )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 9: Add the objective", "apps": [], "results": {"msg": [{"data": "<h2>Step 9: Add the objective</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe objective of this problem is to minimize the overall completion date (the completion date of the house that is completed last). \nThe maximum completion date among the individual house projects is determined using the expression *end_of()* on the last task in building each house (here, it is the moving task) and minimize the maximum of these expressions.", "apps": [], "results": {"msg": [{"data": "<p>The objective of this problem is to minimize the overall completion date (the completion date of the house that is completed last). </p>\n<p>The maximum completion date among the individual house projects is determined using the expression <em>end_of()</em> on the last task in building each house (here, it is the moving task) and minimize the maximum of these expressions.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl4.add(\n    mdl4.minimize( \n        mdl4.max( mdl4.end_of(itvs[h,\"moving\"]) for h in Houses)\n    )\n)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 10: Solve the model", "apps": [], "results": {"msg": [{"data": "<h2>Step 10: Solve the model</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. \nThe search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. \nThe code for limiting the solve process is:", "apps": [], "results": {"msg": [{"data": "<p>The search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. </p>\n<p>The search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. </p>\n<p>The code for limiting the solve process is:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol4 = mdl4.solve(url=url, key=key, FailLimit=30000)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol4:\n    print(\"Cost will be \" + str( msol4.get_objective_values()[0] ))\n\n    import docplex.cp.utils_visu as visu\n    import matplotlib.pyplot as plt\n        #Change the plot size\n    from pylab import rcParams\n    rcParams['figure.figsize'] = 15, 3\n\n    workersF = CpoStepFunction()\n    cashF = CpoStepFunction()\n    for p in range(5):\n        cashF.add_value(60 * p, INT_MAX, 30000)\n    for h in Houses:\n        for i,t in enumerate(TaskNames):\n            itv = msol4.get_var_solution(itvs[h,t])\n            workersF.add_value(itv.get_start(), itv.get_end(), 1)\n            cashF.add_value(itv.start, INT_MAX, -200 * Duration[i])\n\n    visu.timeline('Solution SchedCumul')\n    visu.panel(name=\"Schedule\")\n    for h in Houses:\n        for i,t in enumerate(TaskNames):\n            visu.interval(msol4.get_var_solution(itvs[h,t]), h, t)\n    visu.panel(name=\"Workers\")\n    visu.function(segments=workersF, style='area')\n    visu.panel(name=\"Cash\")\n    visu.function(segments=cashF, style='area', color='gold')\n    visu.show()\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 6. Using alternative resources in the house building problem\n\nThis chapter presents how to use alternative resources in the house building problem. The following concepts are presented:\n* use the constraints *alternative* and *presence_of*,\n* use the function *optional*.\n\nEach house has a maximal completion date. \nMoreover, there are three workers, and one of the three is required for each task. \nThe three workers have varying levels of skills with regard to the various tasks; if a worker has no skill for a particular task, he may not be assigned to the task. \nFor some pairs of tasks, if a particular worker performs one of the pair on a house, then the same worker must be assigned to the other of the pair for that house. \nThe objective is to find a solution that maximizes the task associated skill levels of the workers assigned to the tasks. ", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 6. Using alternative resources in the house building problem</h1>\n<p></p>\n<p>This chapter presents how to use alternative resources in the house building problem. The following concepts are presented:</p>\n<ul>\n<li>use the constraints <em>alternative</em> and <em>presence_of</em>,</li>\n</ul>\n<ul>\n<li>use the function <em>optional</em>.</li>\n</ul>\n<p></p>\n<p>Each house has a maximal completion date. </p>\n<p>Moreover, there are three workers, and one of the three is required for each task. </p>\n<p>The three workers have varying levels of skills with regard to the various tasks; if a worker has no skill for a particular task, he may not be assigned to the task. </p>\n<p>For some pairs of tasks, if a particular worker performs one of the pair on a house, then the same worker must be assigned to the other of the pair for that house. </p>\n<p>The objective is to find a solution that maximizes the task associated skill levels of the workers assigned to the tasks. </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Problem to be solved\n\nThe problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and maximizes a criterion. The criterion for this problem is to maximize the task associated skill levels of the workers assigned to the tasks.\n\nFor each task type in the house building project, the following table shows the duration of the task in days along with the tasks that must be finished before the task can start. A worker can only work on one task at a time; each task, once started, may not be interrupted.", "apps": [], "results": {"msg": [{"data": "<h2>Problem to be solved</h2>\n<p></p>\n<p>The problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and maximizes a criterion. The criterion for this problem is to maximize the task associated skill levels of the workers assigned to the tasks.</p>\n<p></p>\n<p>For each task type in the house building project, the following table shows the duration of the task in days along with the tasks that must be finished before the task can start. A worker can only work on one task at a time; each task, once started, may not be interrupted.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction tasks:\n\n| Task      | Duration | Preceding tasks |\n|-----------|----------|-----------------|\n| masonry   | 35       |                 |\n| carpentry | 15       | masonry         |\n| plumbing  | 40       | masonry         |\n| ceiling   | 15       | masonry         |\n| roofing   |  5       | carpentry       |\n| painting  | 10       | ceiling         |\n| windows   |  5       | roofing         |\n| facade    | 10       | roofing, plumbing         |\n| garden    |  5       | roofing, plumbing         |\n| moving    |  5       | windows, facade, garden,painting         |", "apps": [], "results": {"msg": [{"data": "<p>House construction tasks:</p>\n<p></p>\n<p>| Task      | Duration | Preceding tasks |</p>\n<p>|-----------|----------|-----------------|</p>\n<p>| masonry   | 35       |                 |</p>\n<p>| carpentry | 15       | masonry         |</p>\n<p>| plumbing  | 40       | masonry         |</p>\n<p>| ceiling   | 15       | masonry         |</p>\n<p>| roofing   |  5       | carpentry       |</p>\n<p>| painting  | 10       | ceiling         |</p>\n<p>| windows   |  5       | roofing         |</p>\n<p>| facade    | 10       | roofing, plumbing         |</p>\n<p>| garden    |  5       | roofing, plumbing         |</p>\n<p>| moving    |  5       | windows, facade, garden,painting         |</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nEvery house must be completed within 300 days. There are three workers with varying skill levels in regard to the ten tasks. If a worker has a skill level of zero for a task, he may not be assigned to the task.", "apps": [], "results": {"msg": [{"data": "<p>Every house must be completed within 300 days. There are three workers with varying skill levels in regard to the ten tasks. If a worker has a skill level of zero for a task, he may not be assigned to the task.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nWorker-task skill levels:\n    \n| Task      | Joe | Jack | Jim |\n|-----------|-----|------|-----|\n| masonry   |  9  | 5    | 0   | \n| carpentry |  7  | 0    | 5   | \n| plumbing  |  0  | 7    | 0   | \n| ceiling   |  5  | 8    | 0   | \n| roofing   |  6  | 7    | 0   | \n| painting  |  0  | 9    | 6   | \n| windows   |  8  | 0    | 5   | \n| fa\u00e7ade    |  5  | 5    | 0   | \n| garden    |  5  | 5    | 9   | \n| moving    |  6  | 0    | 8   | ", "apps": [], "results": {"msg": [{"data": "<p>Worker-task skill levels:</p>\n<p></p>\n<p>| Task      | Joe | Jack | Jim |</p>\n<p>|-----------|-----|------|-----|</p>\n<p>| masonry   |  9  | 5    | 0   | </p>\n<p>| carpentry |  7  | 0    | 5   | </p>\n<p>| plumbing  |  0  | 7    | 0   | </p>\n<p>| ceiling   |  5  | 8    | 0   | </p>\n<p>| roofing   |  6  | 7    | 0   | </p>\n<p>| painting  |  0  | 9    | 6   | </p>\n<p>| windows   |  8  | 0    | 5   | </p>\n<p>| fa\u00e7ade    |  5  | 5    | 0   | </p>\n<p>| garden    |  5  | 5    | 9   | </p>\n<p>| moving    |  6  | 0    | 8   | </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nFor Jack, if he performs the roofing task or facade task on a house, then he must perform the other task on that house. For Jim, if he performs the garden task or moving task on a house, then he must perform the other task on that house. For\n\nJoe, if he performs the masonry task or carpentry task on a house, then he must perform the other task on that house. Also, if Joe performs the carpentry task or roofing task on a house, then he must perform the other task on that house.", "apps": [], "results": {"msg": [{"data": "<p>For Jack, if he performs the roofing task or facade task on a house, then he must perform the other task on that house. For Jim, if he performs the garden task or moving task on a house, then he must perform the other task on that house. For</p>\n<p></p>\n<p>Joe, if he performs the masonry task or carpentry task on a house, then he must perform the other task on that house. Also, if Joe performs the carpentry task or roofing task on a house, then he must perform the other task on that house.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 1: Describe the problem\nThe first step in modeling and solving the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.\n\n* What is the known information in this problem ?\n\n   There are five houses to be built by three workers. For each house, there are ten house building tasks, each with a given size. For each task, there is a list of tasks that must be completed before the task can start. Each worker has a skill level associated with each task. There is an overall deadline for the work to be completed on the five houses.\n\n\n* What are the decision variables or unknowns in this problem ?\n\n   The unknown is the point in time that each task will start. Also, unknown is which worker will be assigned to each task.\n\n\n* What are the constraints on these variables ?\n\n   There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. In addition, there are constraints that specify that each task must have one worker assigned to it, that a worker can be assigned to only one task at a time and that a worker can be assigned only to tasks for which he has some level of skill. There are pairs of tasks that if one task for a house is done by a particular worker, then the other task for that house must be done by the same worker.\n\n\n* What is the objective ?\n\n   The objective is to maximize the skill levels used.", "apps": [], "results": {"msg": [{"data": "<h2>Step 1: Describe the problem</h2>\n<p>The first step in modeling and solving the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.</p>\n<p></p>\n<ul>\n<li>What is the known information in this problem ?</li>\n</ul>\n<p></p>\n<p>There are five houses to be built by three workers. For each house, there are ten house building tasks, each with a given size. For each task, there is a list of tasks that must be completed before the task can start. Each worker has a skill level associated with each task. There is an overall deadline for the work to be completed on the five houses.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the decision variables or unknowns in this problem ?</li>\n</ul>\n<p></p>\n<p>The unknown is the point in time that each task will start. Also, unknown is which worker will be assigned to each task.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the constraints on these variables ?</li>\n</ul>\n<p></p>\n<p>There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. In addition, there are constraints that specify that each task must have one worker assigned to it, that a worker can be assigned to only one task at a time and that a worker can be assigned only to tasks for which he has some level of skill. There are pairs of tasks that if one task for a house is done by a particular worker, then the other task for that house must be done by the same worker.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What is the objective ?</li>\n</ul>\n<p></p>\n<p>The objective is to maximize the skill levels used.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 2: Prepare data\nIn the related data file, the data provided includes the number of houses (NbHouses), the names of the workers (Workers), the names of the tasks (Tasks), the sizes of the tasks (Durations), the precedence relations (Precedences), and the overall deadline for the construction of the houses (Deadline).\n\nThe data also includes a tupleset, Skills. Each tuple in the set consists of a worker, a task, and the skill level that the worker has for the task. In addition, there is a tupleset, Continuities, which is a set of triples (a pair of tasks and a worker). If one of the two tasks in a pair is performed by the worker for a given house, then the other task in the pair must be performed by the same worker for that house.\n\nTwo matrices of interval variables are created in this model. \nThe first, tasks, is indexed on the houses and tasks and must be scheduled in the interval [0..Deadline]. \nThe other matrix of interval variables is indexed on the houses and the Skills tupleset. \nThese interval variables are optional and may or may not be present in the solution. \nThe intervals that are performed will represent which worker performs which task.", "apps": [], "results": {"msg": [{"data": "<h2>Step 2: Prepare data</h2>\n<p>In the related data file, the data provided includes the number of houses (NbHouses), the names of the workers (Workers), the names of the tasks (Tasks), the sizes of the tasks (Durations), the precedence relations (Precedences), and the overall deadline for the construction of the houses (Deadline).</p>\n<p></p>\n<p>The data also includes a tupleset, Skills. Each tuple in the set consists of a worker, a task, and the skill level that the worker has for the task. In addition, there is a tupleset, Continuities, which is a set of triples (a pair of tasks and a worker). If one of the two tasks in a pair is performed by the worker for a given house, then the other task in the pair must be performed by the same worker for that house.</p>\n<p></p>\n<p>Two matrices of interval variables are created in this model. </p>\n<p>The first, tasks, is indexed on the houses and tasks and must be scheduled in the interval [0..Deadline]. </p>\n<p>The other matrix of interval variables is indexed on the houses and the Skills tupleset. </p>\n<p>These interval variables are optional and may or may not be present in the solution. </p>\n<p>The intervals that are performed will represent which worker performs which task.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nNbHouses = 5\nDeadline =  318\n\nWorkers = [\"Joe\", \"Jack\", \"Jim\"]\n\nTasks = [\"masonry\", \"carpentry\", \"plumbing\", \"ceiling\",\"roofing\", \"painting\", \"windows\", \"facade\",\"garden\", \"moving\"]\n\nDurations =  [35, 15, 40, 15, 5, 10, 5, 10, 5, 5]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nSkills = [(\"Joe\",\"masonry\",9),(\"Joe\",\"carpentry\",7),(\"Joe\",\"ceiling\",5),(\"Joe\",\"roofing\",6), \n          (\"Joe\",\"windows\",8),(\"Joe\",\"facade\",5),(\"Joe\",\"garden\",5),(\"Joe\",\"moving\",6),\n          (\"Jack\",\"masonry\",5),(\"Jack\",\"plumbing\",7),(\"Jack\",\"ceiling\",8),(\"Jack\",\"roofing\",7),\n          (\"Jack\",\"painting\",9),(\"Jack\",\"facade\",5),(\"Jack\",\"garden\",5),(\"Jim\",\"carpentry\",5),\n          (\"Jim\",\"painting\",6),(\"Jim\",\"windows\",5),(\"Jim\",\"garden\",9),(\"Jim\",\"moving\",8)]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nPrecedences = [(\"masonry\",\"carpentry\"),(\"masonry\",\"plumbing\"),(\"masonry\",\"ceiling\"),\n               (\"carpentry\",\"roofing\"),(\"ceiling\",\"painting\"),(\"roofing\",\"windows\"),\n               (\"roofing\",\"facade\"),(\"plumbing\",\"facade\"),(\"roofing\",\"garden\"),\n               (\"plumbing\",\"garden\"),(\"windows\",\"moving\"),(\"facade\",\"moving\"),\n               (\"garden\",\"moving\"),(\"painting\",\"moving\")\n              ]\n \nContinuities = [(\"Joe\",\"masonry\",\"carpentry\"),(\"Jack\",\"roofing\",\"facade\"), \n                (\"Joe\",\"carpentry\", \"roofing\"),(\"Jim\",\"garden\",\"moving\")]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nnbWorkers = len(Workers)\nHouses = range(NbHouses)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 3: Create the interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 3: Create the interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl5 = CpoModel()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\ntasks = {}\nwtasks = {}\nfor h in Houses:\n    for i,t in enumerate(Tasks):\n        tasks[(h,t)] = mdl5.interval_var(start=[0,Deadline], size=Durations[i])\n    for s in Skills:\n        wtasks[(h,s)] = mdl5.interval_var(optional=True)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 4: Add the temporal constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 4: Add the temporal constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe tasks in the model have precedence constraints that are added to the model.", "apps": [], "results": {"msg": [{"data": "<p>The tasks in the model have precedence constraints that are added to the model.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for p in Precedences:\n        mdl5.add( mdl5.end_before_start(tasks[h,p[0]], tasks[h,p[1]]) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 5: Add the alternative constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 5: Add the alternative constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nthe specialized constraint *alternative()* is used to constrain the solution so that exactly one of the interval variables tasks associated with a given task of a given house is to be present in the solution, \n\nThe constraint *alternative()* creates a constraint between an interval and a set of intervals that specifies that if the given interval is present in the solution, then exactly one interval variable of the set is present in the solution.\n\nIn other words, consider an alternative constraint created with an interval variable *a* and an array of interval variables *bs*. If *a* is present in the solution, then exactly one of the interval variables in *bs* will be present, and *a* starts and ends together with this chosen interval.", "apps": [], "results": {"msg": [{"data": "<p>the specialized constraint <em>alternative()</em> is used to constrain the solution so that exactly one of the interval variables tasks associated with a given task of a given house is to be present in the solution, </p>\n<p></p>\n<p>The constraint <em>alternative()</em> creates a constraint between an interval and a set of intervals that specifies that if the given interval is present in the solution, then exactly one interval variable of the set is present in the solution.</p>\n<p></p>\n<p>In other words, consider an alternative constraint created with an interval variable <em>a</em> and an array of interval variables <em>bs</em>. If <em>a</em> is present in the solution, then exactly one of the interval variables in <em>bs</em> will be present, and <em>a</em> starts and ends together with this chosen interval.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for t in Tasks:\n        mdl5.add( mdl5.alternative(tasks[h,t], [wtasks[h,s] for s in Skills if s[1]==t]) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe expression *presence_of()* is used to represent whether a task is performed by a worker. \nThe constraint *presence_of()* is true if the interval variable is present in and is false if the interval variable is absent from the solution.\n\nFor each house and each given pair of tasks and worker that must have continuity, a constraint states that if the interval variable for one of the two tasks for the worker is present, the interval variable associated with that worker and the other task must also be present.", "apps": [], "results": {"msg": [{"data": "<p>The expression <em>presence_of()</em> is used to represent whether a task is performed by a worker. </p>\n<p>The constraint <em>presence_of()</em> is true if the interval variable is present in and is false if the interval variable is absent from the solution.</p>\n<p></p>\n<p>For each house and each given pair of tasks and worker that must have continuity, a constraint states that if the interval variable for one of the two tasks for the worker is present, the interval variable associated with that worker and the other task must also be present.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for c in Continuities:\n        for (worker1, task1, l1) in Skills:\n            if worker1 == c[0] and task1 == c[1]:\n                for (worker2, task2, l2) in Skills:\n                    if worker2 == c[0] and task2 == c[2]:\n                           mdl5.add(\n                               mdl5.presence_of(wtasks[h,(c[0], task1, l1)]) \n                               == \n                               mdl5.presence_of(wtasks[h,(c[0], task2, l2)])\n                           )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 7: Add the no overlap constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 7: Add the no overlap constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe constraint *no_overlap()* allows to specify that a given worker can be assigned only one task at a given moment in time.", "apps": [], "results": {"msg": [{"data": "<p>The constraint <em>no_overlap()</em> allows to specify that a given worker can be assigned only one task at a given moment in time.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor w in Workers:\n    mdl5.add( mdl5.no_overlap([wtasks[h,s] for h in Houses for s in Skills if s[0]==w]) )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 8: Add the objective", "apps": [], "results": {"msg": [{"data": "<h2>Step 8: Add the objective</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe presence of an interval variable in the solution must be accounted in the objective. Thus for each of these possible tasks, the cost is incremented by the product of the skill level and the expression representing the presence of the interval variable in the solution.\nThe objective of this problem is to maximize the skill levels used for all the tasks, then to maximize the expression.", "apps": [], "results": {"msg": [{"data": "<p>The presence of an interval variable in the solution must be accounted in the objective. Thus for each of these possible tasks, the cost is incremented by the product of the skill level and the expression representing the presence of the interval variable in the solution.</p>\n<p>The objective of this problem is to maximize the skill levels used for all the tasks, then to maximize the expression.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl5.add(\n    mdl5.maximize(\n        mdl5.sum( s[2] * mdl5.presence_of(wtasks[h,s]) for h in Houses for s in Skills)\n    )\n)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 9: Solve the model", "apps": [], "results": {"msg": [{"data": "<h2>Step 9: Solve the model</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. The search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. ", "apps": [], "results": {"msg": [{"data": "<p>The search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. The search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol5 = mdl5.solve(url=url, key=key, FailLimit=30000)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol5:\n    print(\"Cost will be \"+str( msol5.get_objective_values()[0] ))\n\n    worker_idx = {w : i for i,w in enumerate(Workers)}\n    worker_tasks = [[] for w in range(nbWorkers)]  # Tasks assigned to a given worker\n    for h in Houses:\n        for s in Skills:\n            worker = s[0]\n            wt = wtasks[(h,s)]\n            worker_tasks[worker_idx[worker]].append(wt)\n\n    import docplex.cp.utils_visu as visu\n    import matplotlib.pyplot as plt\n        #Change the plot size\n    from pylab import rcParams\n    rcParams['figure.figsize'] = 15, 3\n\n    visu.timeline('Solution SchedOptional', 0, Deadline)\n    for i,w in enumerate(Workers):\n        visu.sequence(name=w)\n        for t in worker_tasks[worker_idx[w]]:\n            wt = msol5.get_var_solution(t)\n            if wt.is_present():\n                #if desc[t].skills[w] == max(desc[t].skills):\n                    # Green-like color when task is using the most skilled worker\n                #    color = 'lightgreen'\n                #else:\n                        # Red-like color when task does not use the most skilled worker\n                #    color = 'salmon'\n                color = 'salmon'\n                visu.interval(wt, color, wt.get_name())\n    visu.show()\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Chapter 7. Using state functions: house building with state incompatibilities\n\nThis chapter describes how to use state functions to take into account incompatible states as tasks finish. Following concepts are presented:\n* use the *stateFunction*,\n* use the constraint *alwaysEqual*.\n\nThere are two workers, and each task requires either one of the two workers. \nA subset of the tasks require that the house be clean, whereas other tasks make the house dirty. \nA transition time is needed to change the state of the house from dirty to clean. ", "apps": [], "results": {"msg": [{"data": "<h1>Chapter 7. Using state functions: house building with state incompatibilities</h1>\n<p></p>\n<p>This chapter describes how to use state functions to take into account incompatible states as tasks finish. Following concepts are presented:</p>\n<ul>\n<li>use the <em>stateFunction</em>,</li>\n</ul>\n<ul>\n<li>use the constraint <em>alwaysEqual</em>.</li>\n</ul>\n<p></p>\n<p>There are two workers, and each task requires either one of the two workers. </p>\n<p>A subset of the tasks require that the house be clean, whereas other tasks make the house dirty. </p>\n<p>A transition time is needed to change the state of the house from dirty to clean. </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Problem to be solved\n\nThe problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes an expression. The objective for this problem is to minimize the overall completion date.\n\nFor each task type in the house building project, the following table shows the duration of the task in days along with state of the house during the task. A worker can only work on one task at a time; each task, once started, may not be interrupted.", "apps": [], "results": {"msg": [{"data": "<h2>Problem to be solved</h2>\n<p></p>\n<p>The problem consists of assigning start dates to a set of tasks in such a way that the schedule satisfies temporal constraints and minimizes an expression. The objective for this problem is to minimize the overall completion date.</p>\n<p></p>\n<p>For each task type in the house building project, the following table shows the duration of the task in days along with state of the house during the task. A worker can only work on one task at a time; each task, once started, may not be interrupted.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nHouse construction tasks:\n     \n| Task      | Duration | State | Preceding tasks |\n|-----------|----------|-------|-----------------|\n| masonry   | 35       | dirty |                 | \n| carpentry | 15       | dirty | masonry         | \n| plumbing  | 40       | clean | masonry         | \n| ceiling   | 15       | clean | masonry         | \n| roofing   | 5        | dirty | carpentry       | \n| painting  | 10       | clean | ceiling         |\n| windows   | 5        | dirty | roofing         | \n| facade    | 10       |       | roofing, plumbing| \n| garden    | 5        |       | roofing, plumbing| \n| moving    | 5        |       | windows, facade,garden, painting| \n\nSolving the problem consists of determining starting dates for the tasks such that\nthe overall completion date is minimized.", "apps": [], "results": {"msg": [{"data": "<p>House construction tasks:</p>\n<p></p>\n<p>| Task      | Duration | State | Preceding tasks |</p>\n<p>|-----------|----------|-------|-----------------|</p>\n<p>| masonry   | 35       | dirty |                 | </p>\n<p>| carpentry | 15       | dirty | masonry         | </p>\n<p>| plumbing  | 40       | clean | masonry         | </p>\n<p>| ceiling   | 15       | clean | masonry         | </p>\n<p>| roofing   | 5        | dirty | carpentry       | </p>\n<p>| painting  | 10       | clean | ceiling         |</p>\n<p>| windows   | 5        | dirty | roofing         | </p>\n<p>| facade    | 10       |       | roofing, plumbing| </p>\n<p>| garden    | 5        |       | roofing, plumbing| </p>\n<p>| moving    | 5        |       | windows, facade,garden, painting| </p>\n<p></p>\n<p>Solving the problem consists of determining starting dates for the tasks such that</p>\n<p>the overall completion date is minimized.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 1: Describe the problem\n\nThe first step in modeling and solving the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.\n\n* What is the known information in this problem ?\n\n   There are five houses to be built by two workers. For each house, there are ten house building tasks, each with a given size. For each task, there is a list of tasks that must be completed before the task can start. There are two workers. There is a transition time associated with changing the state of a house from dirty to clean.\n\n\n* What are the decision variables or unknowns in this problem ?\n\n   The unknowns are the date that each task will start. The cost is determined by the assigned start dates.\n\n\n* What are the constraints on these variables ?\n\n   There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. Each task requires either one of the two workers. Some tasks have a specified house cleanliness state.\n\n\n* What is the objective ?\n\n   The objective is to minimize the overall completion date.", "apps": [], "results": {"msg": [{"data": "<h2>Step 1: Describe the problem</h2>\n<p></p>\n<p>The first step in modeling and solving the problem is to write a natural language description of the problem, identifying the decision variables and the constraints on these variables.</p>\n<p></p>\n<ul>\n<li>What is the known information in this problem ?</li>\n</ul>\n<p></p>\n<p>There are five houses to be built by two workers. For each house, there are ten house building tasks, each with a given size. For each task, there is a list of tasks that must be completed before the task can start. There are two workers. There is a transition time associated with changing the state of a house from dirty to clean.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the decision variables or unknowns in this problem ?</li>\n</ul>\n<p></p>\n<p>The unknowns are the date that each task will start. The cost is determined by the assigned start dates.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What are the constraints on these variables ?</li>\n</ul>\n<p></p>\n<p>There are constraints that specify that a particular task may not begin until one or more given tasks have been completed. Each task requires either one of the two workers. Some tasks have a specified house cleanliness state.</p>\n<p></p>\n<p></p>\n<ul>\n<li>What is the objective ?</li>\n</ul>\n<p></p>\n<p>The objective is to minimize the overall completion date.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 2: Prepare data\nIn the related data, the data provided includes the number of houses (NbHouses), the number of workers (NbWorkers), the names of the tasks (TaskNames), the sizes of the tasks (Duration), the precedence relations (Precedences), and the cleanliness state of each task (AllStates).\n\nEach house has a list of tasks that must be scheduled. The duration, or size, of each task *t* is *Duration[t]*. Using this information, a matrix task of interval variables can be built.", "apps": [], "results": {"msg": [{"data": "<h2>Step 2: Prepare data</h2>\n<p>In the related data, the data provided includes the number of houses (NbHouses), the number of workers (NbWorkers), the names of the tasks (TaskNames), the sizes of the tasks (Duration), the precedence relations (Precedences), and the cleanliness state of each task (AllStates).</p>\n<p></p>\n<p>Each house has a list of tasks that must be scheduled. The duration, or size, of each task <em>t</em> is <em>Duration[t]</em>. Using this information, a matrix task of interval variables can be built.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nNbHouses = 5\nNbWorkers = 2\nAllStates = [\"clean\", \"dirty\"]\n\nTaskNames = [\"masonry\",\"carpentry\", \"plumbing\", \"ceiling\",\"roofing\",\"painting\",\"windows\",\"facade\",\"garden\",\"moving\"]\n\nDuration =  [35,15,40,15,5,10,5,10,5,5]\n\nStates = [(\"masonry\",\"dirty\"),(\"carpentry\",\"dirty\"),(\"plumbing\",\"clean\"),\n          (\"ceiling\",\"clean\"),(\"roofing\",\"dirty\"),(\"painting\",\"clean\"),\n          (\"windows\",\"dirty\")]\n\nPrecedences = [(\"masonry\",\"carpentry\"),(\"masonry\",\"plumbing\"),(\"masonry\",\"ceiling\"),\n               (\"carpentry\",\"roofing\"),(\"ceiling\",\"painting\"),(\"roofing\",\"windows\"),\n               (\"roofing\",\"facade\"),(\"plumbing\",\"facade\"),(\"roofing\",\"garden\"),\n               (\"plumbing\",\"garden\"),(\"windows\",\"moving\"),(\"facade\",\"moving\"),\n               (\"garden\",\"moving\"),(\"painting\",\"moving\")]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nHouses = range(NbHouses)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 3: Create the interval variables", "apps": [], "results": {"msg": [{"data": "<h2>Step 3: Create the interval variables</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nfrom docplex.cp.model import *", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl6 = CpoModel()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\ntask = {}\nfor h in Houses:\n    for i,t in enumerate(TaskNames):\n        task[(h,t)] = mdl6.interval_var(size = Duration[i])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 4: Declare the worker usage functions", "apps": [], "results": {"msg": [{"data": "<h2>Step 4: Declare the worker usage functions</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nAs in the example Chapter 5, \u201cUsing cumulative functions in the house building problem\u201d, each task requires one worker from the start to the end of the task interval. To represent the fact that a worker is required for the task, a cumulative function expression *workers* is created. \nThis function is constrained to not exceed the number of workers at any point in time.\nhe function pulse adjusts the expression by a given amount on the interval. \nSumming these pulse atoms over all the interval variables results in an expression that represents worker usage over the entire time frame for building the houses.", "apps": [], "results": {"msg": [{"data": "<p>As in the example Chapter 5, \u201cUsing cumulative functions in the house building problem\u201d, each task requires one worker from the start to the end of the task interval. To represent the fact that a worker is required for the task, a cumulative function expression <em>workers</em> is created. </p>\n<p>This function is constrained to not exceed the number of workers at any point in time.</p>\n<p>he function pulse adjusts the expression by a given amount on the interval. </p>\n<p>Summing these pulse atoms over all the interval variables results in an expression that represents worker usage over the entire time frame for building the houses.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nworkers = step_at(0, 0)\nfor h in Houses:\n    for t in TaskNames:\n        workers += mdl6.pulse(task[h,t], 1)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 5: Create the transition times", "apps": [], "results": {"msg": [{"data": "<h2>Step 5: Create the transition times</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe transition time from a dirty state to a clean state is the same for all houses. \nAs in the example Chapter 3, \u201cAdding workers and transition times to the house building problem\u201d, a tupleset *ttime* is created to represent the transition time between cleanliness states.", "apps": [], "results": {"msg": [{"data": "<p>The transition time from a dirty state to a clean state is the same for all houses. </p>\n<p>As in the example Chapter 3, \u201cAdding workers and transition times to the house building problem\u201d, a tupleset <em>ttime</em> is created to represent the transition time between cleanliness states.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nIndex = {s : i for i,s in enumerate(AllStates)}", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nttvalues = [[0, 0], [0, 0]]\nttvalues[Index[\"dirty\"]][Index[\"clean\"]] = 1\nttime = transition_matrix(ttvalues, name='TTime')", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 6: Declare the state function", "apps": [], "results": {"msg": [{"data": "<h2>Step 6: Declare the state function</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nCertain tasks require the house to be clean, and other tasks cause the house to be dirty. \nTo model the possible states of the house, the state function *function* is used to represent the disjoint states through time.\n\nA state function is a function describing the evolution of a given feature of the environment. \nThe possible evolution of this feature is constrained by interval variables of the problem. \nFor example, a scheduling problem may contain a resource whose state changes over time. \nThe resource state can change because of scheduled activities or because of exogenous events; some activities in the schedule may need a particular resource state in order to execute.\nInterval variables have an absolute effect on a state function, requiring the function value to be equal to a particular state or in a set of possible states.", "apps": [], "results": {"msg": [{"data": "<p>Certain tasks require the house to be clean, and other tasks cause the house to be dirty. </p>\n<p>To model the possible states of the house, the state function <em>function</em> is used to represent the disjoint states through time.</p>\n<p></p>\n<p>A state function is a function describing the evolution of a given feature of the environment. </p>\n<p>The possible evolution of this feature is constrained by interval variables of the problem. </p>\n<p>For example, a scheduling problem may contain a resource whose state changes over time. </p>\n<p>The resource state can change because of scheduled activities or because of exogenous events; some activities in the schedule may need a particular resource state in order to execute.</p>\n<p>Interval variables have an absolute effect on a state function, requiring the function value to be equal to a particular state or in a set of possible states.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nstate = { h : state_function(ttime, name=\"house\"+str(h)) for h in Houses}", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 7: Add the constraints", "apps": [], "results": {"msg": [{"data": "<h2>Step 7: Add the constraints</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nTo model the state required or imposed by a task, a constraint is created to specifies the state of the house throughout the interval variable representing that task.\n\nThe constraint *always_equal()*, specifies the value of a state function over the interval variable.\nThe constraint takes as parameters a state function, an interval variable, and a state value.\nWhenever the interval variable is present, the state function is defined everywhere between the start and the end of the interval variable and remains equal to the specified state value over this interval.\nThe state function is constrained to take the appropriate values during the tasks that require the house to be in a specific state.\nTo add the constraint that there can be only two workers working at a given time, the cumulative function expression representing worker usage is constrained to not be greater than the value *NbWorkers*.", "apps": [], "results": {"msg": [{"data": "<p>To model the state required or imposed by a task, a constraint is created to specifies the state of the house throughout the interval variable representing that task.</p>\n<p></p>\n<p>The constraint <em>always_equal()</em>, specifies the value of a state function over the interval variable.</p>\n<p>The constraint takes as parameters a state function, an interval variable, and a state value.</p>\n<p>Whenever the interval variable is present, the state function is defined everywhere between the start and the end of the interval variable and remains equal to the specified state value over this interval.</p>\n<p>The state function is constrained to take the appropriate values during the tasks that require the house to be in a specific state.</p>\n<p>To add the constraint that there can be only two workers working at a given time, the cumulative function expression representing worker usage is constrained to not be greater than the value <em>NbWorkers</em>.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfor h in Houses:\n    for p in Precedences:\n        mdl6.add( mdl6.end_before_start(task[h,p[0]], task[h,p[1]]) )\n\n    for s in States:\n        mdl6.add( mdl6.always_equal(state[h], task[h,s[0]], Index[s[1]]) )\n\nmdl6.add( workers <= NbWorkers )", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 8: Add the objective", "apps": [], "results": {"msg": [{"data": "<h2>Step 8: Add the objective</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe objective of this problem is to minimize the overall completion date (the completion date of the house that is completed last).", "apps": [], "results": {"msg": [{"data": "<p>The objective of this problem is to minimize the overall completion date (the completion date of the house that is completed last).</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nmdl6.add(mdl6.minimize( mdl6.max( mdl6.end_of(task[h,\"moving\"]) for h in Houses )))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Step 9: Solve the model", "apps": [], "results": {"msg": [{"data": "<h2>Step 9: Solve the model</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. The search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. \nThe code for limiting the solve process is given below:", "apps": [], "results": {"msg": [{"data": "<p>The search for an optimal solution in this problem could potentiality take a long time, so a fail limit has been placed on the solve process. The search will stop when the fail limit is reached, even if optimality of the current best solution is not guaranteed. </p>\n<p>The code for limiting the solve process is given below:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"\\nSolving model....\")\nmsol6 = mdl6.solve(url=url, key=key, FailLimit=30000)\nprint(\"done\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nif msol6:\n    print(\"Cost will be \" + str( msol6.get_objective_values()[0] ))\n\n    import docplex.cp.utils_visu as visu\n    import matplotlib.pyplot as plt\n        #Change the plot size\n    from pylab import rcParams\n    rcParams['figure.figsize'] = 15, 3\n\n    workers_function = CpoStepFunction()\n    for h in Houses:\n        for t in TaskNames:\n            itv = msol6.get_var_solution(task[h,t])\n            workers_function.add_value(itv.get_start(), itv.get_end(), 1)\n\n    visu.timeline('Solution SchedState')\n    visu.panel(name=\"Schedule\")\n    for h in Houses:\n        for t in TaskNames:\n            visu.interval(msol6.get_var_solution(task[h,t]), h, t)\n\n\n    visu.panel(name=\"Houses state\")\n    for h in Houses:\n        f = state[h]\n        visu.sequence(name=f.get_name(), segments=msol6.get_var_solution(f))\n    visu.panel(name=\"Nb of workers\")\n    visu.function(segments=workers_function, style='line')\n    visu.show()\nelse:\n    print(\"No solution found\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n# Summary\n\nHaving completed this notebook, the reader should be able to:\n- Describe the characteristics of a Scheduling problem in terms of the objective, decision variables and constraints\n- Formulate a simple Scheduling model on paper\n- Conceptually explain the buidling blocks of a scheduling model\n- Write a simple model with docplex\n", "apps": [], "results": {"msg": [{"data": "<h1>Summary</h1>\n<p></p>\n<p>Having completed this notebook, the reader should be able to:</p>\n<ul>\n<li>Describe the characteristics of a Scheduling problem in terms of the objective, decision variables and constraints</li>\n</ul>\n<ul>\n<li>Formulate a simple Scheduling model on paper</li>\n</ul>\n<ul>\n<li>Conceptually explain the buidling blocks of a scheduling model</li>\n</ul>\n<ul>\n<li>Write a simple model with docplex</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## References\n* [CPLEX Modeling for Python documentation](https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html)\n* [Decision Optimization on Cloud](https://developer.ibm.com/docloud/)\n* Need help with DOcplex or to report a bug? Please go [here](https://developer.ibm.com/answers/smartspace/docloud).\n* Contact us at dofeedback@wwpdl.vnet.ibm.com.", "apps": [], "results": {"msg": [{"data": "<h2>References</h2>\n<ul>\n<li><a href=\"https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html\">CPLEX Modeling for Python documentation</a></li>\n</ul>\n<ul>\n<li><a href=\"https://developer.ibm.com/docloud/\">Decision Optimization on Cloud</a></li>\n</ul>\n<ul>\n<li>Need help with DOcplex or to report a bug? Please go <a href=\"https://developer.ibm.com/answers/smartspace/docloud\">here</a>.</li>\n</ul>\n<ul>\n<li>Contact us at dofeedback@wwpdl.vnet.ibm.com.</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}]}