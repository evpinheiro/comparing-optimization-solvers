{"info": {}, "config": {"looknfeel": "default", "personalizedMode": "false"}, "name": "cp/jupyter/golomb_ruler", "paragraphs": [{"settings": {"forms": {}, "params": {}}, "text": "%md\n# Golomb Ruler\n\nThis tutorial includes everything you need to set up decision optimization engines, build constraint programming models.\n\n\nWhen you finish this tutorial, you'll have a foundational knowledge of _Prescriptive Analytics_.\n\n>This notebook is part of the **[Prescriptive Analytics for Python](https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html)**\n\n>It requires a valid subscription to **Decision Optimization on the Cloud** or a **local installation of CPLEX Optimizers**. \n\nDiscover us [here](https://developer.ibm.com/docloud)\n\n\nTable of contents:\n\n-  Describe the business problem\n*  How decision optimization (prescriptive analytics) can help\n*  Use decision optimization\n    *  Step 1: Download the library\n    *  Step 2: Set up the engines\n    -  Step 3: Model the Data\n    -  Step 4: Set up the prescriptive model\n        * Define the decision variables\n        * Express the business constraints\n        * Express the objective\n        * Solve with Decision Optimization solve service\n    *  Step 5: Investigate the solution and run an example analysis\n*  Summary\n****", "apps": [], "results": {"msg": [{"data": "<h1>Golomb Ruler</h1>\n<p></p>\n<p>This tutorial includes everything you need to set up decision optimization engines, build constraint programming models.</p>\n<p></p>\n<p></p>\n<p>When you finish this tutorial, you'll have a foundational knowledge of <em>Prescriptive Analytics</em>.</p>\n<p></p>\n<blockquote>\n  <p>This notebook is part of the <strong><a href=\"https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html\">Prescriptive Analytics for Python</a></strong></p>\n</blockquote>\n<p></p>\n<blockquote>\n  <p>It requires a valid subscription to <strong>Decision Optimization on the Cloud</strong> or a <strong>local installation of CPLEX Optimizers</strong>. </p>\n</blockquote>\n<p></p>\n<p>Discover us <a href=\"https://developer.ibm.com/docloud\">here</a></p>\n<p></p>\n<p></p>\n<p>Table of contents:</p>\n<p></p>\n<ul>\n<li>Describe the business problem</li>\n</ul>\n<ul>\n<li>How decision optimization (prescriptive analytics) can help</li>\n</ul>\n<ul>\n<li>Use decision optimization</li>\n</ul>\n<pre><code>*  Step 1: Download the library\n</code></pre>\n<pre><code>*  Step 2: Set up the engines\n</code></pre>\n<pre><code>-  Step 3: Model the Data\n</code></pre>\n<pre><code>-  Step 4: Set up the prescriptive model\n</code></pre>\n<pre><code>    * Define the decision variables\n</code></pre>\n<pre><code>    * Express the business constraints\n</code></pre>\n<pre><code>    * Express the objective\n</code></pre>\n<pre><code>    * Solve with Decision Optimization solve service\n</code></pre>\n<pre><code>*  Step 5: Investigate the solution and run an example analysis\n</code></pre>\n<ul>\n<li>Summary</li>\n</ul>\n<hr />\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Describe the business problem\n\n* A detailed description (from which this paragraph comes from) is available on <b>Wikipedia</b> at https://en.wikipedia.org/wiki/Golomb_ruler.\n\n* In mathematics, a Golomb ruler is a set of marks at integer positions along an imaginary ruler such that no two pairs of marks are the same distance apart. The number of marks on the ruler is its order, and the largest distance between two of its marks is its length. \n\nFollowing is an example of Golomb ruler of order 4 and length 6.\n<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Golomb_Ruler-4.svg/220px-Golomb_Ruler-4.svg.png\"></center>\n<p>\nThis problem is not only an intellectual problem. It has a lot of practical applications:\n<ul>\n<li> within Information Theory related to error correcting codes,\n<li> the selection of radio frequencies to reduce the effects of intermodulation interference,\n<li> the design of conference rooms, to maximize the number of possible configurations with a minimum of partitions:\n</ul>\n<center>\n<img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Golomb_ruler_conference_room.svg/300px-Golomb_ruler_conference_room.svg.png\"></center>\n", "apps": [], "results": {"msg": [{"data": "<h3>Describe the business problem</h3>\n<p></p>\n<ul>\n<li>A detailed description (from which this paragraph comes from) is available on <b>Wikipedia</b> at https://en.wikipedia.org/wiki/Golomb_ruler.</li>\n</ul>\n<p></p>\n<ul>\n<li>In mathematics, a Golomb ruler is a set of marks at integer positions along an imaginary ruler such that no two pairs of marks are the same distance apart. The number of marks on the ruler is its order, and the largest distance between two of its marks is its length. </li>\n</ul>\n<p></p>\n<p>Following is an example of Golomb ruler of order 4 and length 6.</p>\n<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Golomb_Ruler-4.svg/220px-Golomb_Ruler-4.svg.png\"></center></p>\n<p><p></p>\n<p>This problem is not only an intellectual problem. It has a lot of practical applications:</p>\n<p><ul></p>\n<p><li> within Information Theory related to error correcting codes,</p>\n<p><li> the selection of radio frequencies to reduce the effects of intermodulation interference,</p>\n<p><li> the design of conference rooms, to maximize the number of possible configurations with a minimum of partitions:</p>\n<p></ul></p>\n<p><center></p>\n<p><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Golomb_ruler_conference_room.svg/300px-Golomb_ruler_conference_room.svg.png\"></center></p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n*****\n## How  decision optimization can help\n* Prescriptive analytics technology recommends actions based on desired outcomes, taking into account specific scenarios, resources, and knowledge of past and current events. This insight can help your organization make better decisions and have greater control of business outcomes.  \n\n* Prescriptive analytics is the next step on the path to insight-based actions. It creates value through synergy with predictive analytics, which analyzes data to predict future outcomes.  \n\n* Prescriptive analytics takes that insight to the next level by suggesting the optimal way to handle that future situation. Organizations that can act fast in dynamic conditions and make superior decisions in uncertain environments gain a strong competitive advantage.  \n<br/>\n\n+ For example:\n    + Automate complex decisions and trade-offs to better manage limited resources.\n    + Take advantage of a future opportunity or mitigate a future risk.\n    + Proactively update recommendations based on changing events.\n    + Meet operational goals, increase customer loyalty, prevent threats and fraud, and optimize business processes.\n", "apps": [], "results": {"msg": [{"data": "<hr />\n<h2>How  decision optimization can help</h2>\n<ul>\n<li>Prescriptive analytics technology recommends actions based on desired outcomes, taking into account specific scenarios, resources, and knowledge of past and current events. This insight can help your organization make better decisions and have greater control of business outcomes.  </li>\n</ul>\n<p></p>\n<ul>\n<li>Prescriptive analytics is the next step on the path to insight-based actions. It creates value through synergy with predictive analytics, which analyzes data to predict future outcomes.  </li>\n</ul>\n<p></p>\n<ul>\n<li>Prescriptive analytics takes that insight to the next level by suggesting the optimal way to handle that future situation. Organizations that can act fast in dynamic conditions and make superior decisions in uncertain environments gain a strong competitive advantage.  </li>\n</ul>\n<p><br/></p>\n<p></p>\n<ul>\n<li>For example:</li>\n</ul>\n<pre><code>+ Automate complex decisions and trade-offs to better manage limited resources.\n</code></pre>\n<pre><code>+ Take advantage of a future opportunity or mitigate a future risk.\n</code></pre>\n<pre><code>+ Proactively update recommendations based on changing events.\n</code></pre>\n<pre><code>+ Meet operational goals, increase customer loyalty, prevent threats and fraud, and optimize business processes.\n</code></pre>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n<h3>Modeling the problem</h3>\n<p>\nConstraint Programming is a programming paradigm that allows to express a problem using:\n<ul>\n<li> the unknowns of the problem (the <i>variables</i>),\n<li> the constraints/laws/rules of the problem, mathematical expressions linking variables together (the <i>constraints</i>),\n<li> what is to be optimized (the <i>objective function</i>).\n</ul>\n<p>\nAll this information, plus some configuration parameters, is aggregated into a single object called <i>model</i>. \n<p>\nThe remainder of this notebook describes in details how to build and solve this problem with IBM CP Optimizer, using its <i>DOcplex</i> Python modeling API.", "apps": [], "results": {"msg": [{"data": "<h3>Modeling the problem</h3>\n<p><p></p>\n<p>Constraint Programming is a programming paradigm that allows to express a problem using:</p>\n<p><ul></p>\n<p><li> the unknowns of the problem (the <i>variables</i>),</p>\n<p><li> the constraints/laws/rules of the problem, mathematical expressions linking variables together (the <i>constraints</i>),</p>\n<p><li> what is to be optimized (the <i>objective function</i>).</p>\n<p></ul></p>\n<p><p></p>\n<p>All this information, plus some configuration parameters, is aggregated into a single object called <i>model</i>. </p>\n<p><p></p>\n<p>The remainder of this notebook describes in details how to build and solve this problem with IBM CP Optimizer, using its <i>DOcplex</i> Python modeling API.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Use decision optimization", "apps": [], "results": {"msg": [{"data": "<h2>Use decision optimization</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 1: Download the library\n\nRun the following code to install Decision Optimization CPLEX Modeling library.  The *DOcplex* library contains the two modeling packages, Mathematical Programming and Constraint Programming, referred to earlier.", "apps": [], "results": {"msg": [{"data": "<h3>Step 1: Download the library</h3>\n<p></p>\n<p>Run the following code to install Decision Optimization CPLEX Modeling library.  The <em>DOcplex</em> library contains the two modeling packages, Mathematical Programming and Constraint Programming, referred to earlier.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\nimport pip\ntry:\n    import docplex.cp\nexcept:\n    if hasattr(sys, 'real_prefix'):\n        #we are in a virtual env.\n        pip.main(['install', docplex]) \n    else:\n        pip.main(['install --user', docplex])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nNote that the more global package <i>docplex</i> contains another subpackage <i>docplex.mp</i> that is dedicated to Mathematical Programming, another branch of optimization.", "apps": [], "results": {"msg": [{"data": "<p>Note that the more global package <i>docplex</i> contains another subpackage <i>docplex.mp</i> that is dedicated to Mathematical Programming, another branch of optimization.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 2: Set up the prescriptive engine\n\n* Subscribe to the [Decision Optimization on Cloud solve service](https://developer.ibm.com/docloud).\n* Get the service URL and your personal API key.", "apps": [], "results": {"msg": [{"data": "<h3>Step 2: Set up the prescriptive engine</h3>\n<p></p>\n<ul>\n<li>Subscribe to the <a href=\"https://developer.ibm.com/docloud\">Decision Optimization on Cloud solve service</a>.</li>\n</ul>\n<ul>\n<li>Get the service URL and your personal API key.</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Initialize IBM Decision Optimization credentials\nSVC_URL = \"ENTER YOUR URL HERE\"\nSVC_KEY = \"ENTER YOUR KEY HERE\"", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nNow, we need to import all required modeling functions that are provided by the <i>docplex.cp</i> package:", "apps": [], "results": {"msg": [{"data": "<p>Now, we need to import all required modeling functions that are provided by the <i>docplex.cp</i> package:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Import Constraint Programming modelization functions\nfrom docplex.cp.model import CpoModel", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 3: Model the data\n<h4>Define model input data</h4>\n<p>\nThe first thing to define is the model input data.\nIn the case of the Golomb Ruler problem, there is only one input which is the order of the ruler, that is the number of marks:", "apps": [], "results": {"msg": [{"data": "<h3>Step 3: Model the data</h3>\n<h4>Define model input data</h4>\n<p><p></p>\n<p>The first thing to define is the model input data.</p>\n<p>In the case of the Golomb Ruler problem, there is only one input which is the order of the ruler, that is the number of marks:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Define required number of marks on the ruler\nORDER = 7", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 4: Set up the prescriptive model", "apps": [], "results": {"msg": [{"data": "<h3>Step 4: Set up the prescriptive model</h3>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n<h4>Create the model container</h4>\n<p>\nThe model is represented by a Python object that is filled with the different model elements (variables, constraints, objective function, etc). The first thing to do is then to create such an object:", "apps": [], "results": {"msg": [{"data": "<h4>Create the model container</h4>\n<p><p></p>\n<p>The model is represented by a Python object that is filled with the different model elements (variables, constraints, objective function, etc). The first thing to do is then to create such an object:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Create model object\nmdl = CpoModel(name=\"GolombRuler\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Define the decision variables\n\n* Now, we need to define the variables of the problem. As the expected problem result is the list of mark positions, the simplest choice is to create one integer variable to represent the position of each mark on the ruler.\n\n* Each variable has a a set of possible values called his <i>domain</i>. To reduce the search space, it is important to reduce this domain as far as possible.\n\n* In our case, we can naively estimate that the maximum distance between two adjacent marks is the order of the ruler minus one. Then the maximal position of a mark is (ORDER - 1)\u00b2. Each variable domain is then limited to an interval [0..(ORDER - 1)\u00b2].\n\n* A list of integer variables can be defined using method <i>integer_var_list()</i>. In our case, defining one variable for each mark can be created as follows:", "apps": [], "results": {"msg": [{"data": "<h4>Define the decision variables</h4>\n<p></p>\n<ul>\n<li>Now, we need to define the variables of the problem. As the expected problem result is the list of mark positions, the simplest choice is to create one integer variable to represent the position of each mark on the ruler.</li>\n</ul>\n<p></p>\n<ul>\n<li>Each variable has a a set of possible values called his <i>domain</i>. To reduce the search space, it is important to reduce this domain as far as possible.</li>\n</ul>\n<p></p>\n<ul>\n<li>In our case, we can naively estimate that the maximum distance between two adjacent marks is the order of the ruler minus one. Then the maximal position of a mark is (ORDER - 1)\u00b2. Each variable domain is then limited to an interval [0..(ORDER - 1)\u00b2].</li>\n</ul>\n<p></p>\n<ul>\n<li>A list of integer variables can be defined using method <i>integer<em>var</em>list()</i>. In our case, defining one variable for each mark can be created as follows:</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Create array of variables corresponding to ruler marks\nmarks = mdl.integer_var_list(ORDER, 0, (ORDER - 1) ** 2, \"M\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Express the business constraints\n\n* We need to express that all possible distances between two marks must be different. To do this, we create an array that contains all these distances:", "apps": [], "results": {"msg": [{"data": "<h4>Express the business constraints</h4>\n<p></p>\n<ul>\n<li>We need to express that all possible distances between two marks must be different. To do this, we create an array that contains all these distances:</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Create an array with all distances between all marks\ndist = [marks[i] - marks[j] for i in range(1, ORDER) for j in range(0, i)]", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nWe have used here the operator '-' to express the difference between variables. It may appear strange as the variables are not instanciated at that time, but the Python operator has been overloaded to construct a CP expression instead of attempting to compute the arithmetic difference. All other standard Python operators can be used to make operations between CP objects (<, >, <=, >=, ==, !=, +, -, /, *, &, |, //, **,  ...). Have a look to documentation for details.\n<p>\nTo force all these distances to be different, we use the special <i>all_diff()</i> constraint as follows:", "apps": [], "results": {"msg": [{"data": "<p>We have used here the operator '-' to express the difference between variables. It may appear strange as the variables are not instanciated at that time, but the Python operator has been overloaded to construct a CP expression instead of attempting to compute the arithmetic difference. All other standard Python operators can be used to make operations between CP objects (&lt;, &gt;, &lt;=, &gt;=, ==, !=, +, -, /, <em>, &amp;, |, //, *</em>,  ...). Have a look to documentation for details.</p>\n<p><p></p>\n<p>To force all these distances to be different, we use the special <i>all_diff()</i> constraint as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Force all distances to be different\nmdl.add(mdl.all_diff(dist))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe call <i>mdl.add(...)</i> is necessary to express that the constraint must be added to the model.", "apps": [], "results": {"msg": [{"data": "<p>The call <i>mdl.add(...)</i> is necessary to express that the constraint must be added to the model.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n<h4>Remove symmetries</h4>\n<p>\nThe constraint we have expressed above is theoritically enough, and the model can be solved as it is.\n<p>\nHowever, it does not differentiate between all possible permutations of the different mark positions that are solutions to the problem, for example, 0-1-4-6, 4-6-1-0, 6-0-1-4, etc. As there are ORDER! (factorial of ORDER) such permutations, the search space would be drastically reduced by removing them.\n<p>\nWe can do that by forcing an order between marks, for example the order of their index:", "apps": [], "results": {"msg": [{"data": "<h4>Remove symmetries</h4>\n<p><p></p>\n<p>The constraint we have expressed above is theoritically enough, and the model can be solved as it is.</p>\n<p><p></p>\n<p>However, it does not differentiate between all possible permutations of the different mark positions that are solutions to the problem, for example, 0-1-4-6, 4-6-1-0, 6-0-1-4, etc. As there are ORDER! (factorial of ORDER) such permutations, the search space would be drastically reduced by removing them.</p>\n<p><p></p>\n<p>We can do that by forcing an order between marks, for example the order of their index:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Avoid symmetric solutions by ordering marks\nfor i in range(1, ORDER):\n    mdl.add(marks[i] > marks[i - 1])", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nWe also know that first mark is at the beginning of the ruler:", "apps": [], "results": {"msg": [{"data": "<p>We also know that first mark is at the beginning of the ruler:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Force first mark position to zero\nmdl.add(marks[0] == 0)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n<h4>Avoid mirror solutions</h4>\n<p>\nEach optimal solution has a mirror, with all mark distances in the reverse order, for example, 0-1-4-6 and 0-2-5-6. \nThe following constraint can be added to avoid this: ", "apps": [], "results": {"msg": [{"data": "<h4>Avoid mirror solutions</h4>\n<p><p></p>\n<p>Each optimal solution has a mirror, with all mark distances in the reverse order, for example, 0-1-4-6 and 0-2-5-6. </p>\n<p>The following constraint can be added to avoid this: </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Avoid mirror solution\nmdl.add((marks[1] - marks[0]) < (marks[ORDER - 1] - marks[ORDER - 2]))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Express the objective\n\n* Finally, we want to get the shortest Golomb Ruler. This can be expressed by minimizing the position of the last mark.\nAs we have ordered the marks, we can do this using:", "apps": [], "results": {"msg": [{"data": "<h4>Express the objective</h4>\n<p></p>\n<ul>\n<li>Finally, we want to get the shortest Golomb Ruler. This can be expressed by minimizing the position of the last mark.</li>\n</ul>\n<p>As we have ordered the marks, we can do this using:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Minimize ruler size\nmdl.add(mdl.minimize(marks[ORDER - 1]))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nIf the marks were not ordered, we should have use instead:<br>\n<code>   mdl.add(mdl.minimize(mdl.max(marks)))</code><br>", "apps": [], "results": {"msg": [{"data": "<p>If the marks were not ordered, we should have use instead:<br></p>\n<p><code>   mdl.add(mdl.minimize(mdl.max(marks)))</code><br></p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Solve with Decision Optimization solve service\n\nIf url and key are None, the Modeling layer will look for a local runtime, otherwise will use the credentials.\nLook at the documentation for a good understanding of the various solving/generation modes.\n\nIf you're using a Community Edition of CPLEX runtimes, depending on the size of the problem, the solve stage may fail and will need a paying subscription or product installation.", "apps": [], "results": {"msg": [{"data": "<h4>Solve with Decision Optimization solve service</h4>\n<p></p>\n<p>If url and key are None, the Modeling layer will look for a local runtime, otherwise will use the credentials.</p>\n<p>Look at the documentation for a good understanding of the various solving/generation modes.</p>\n<p></p>\n<p>If you're using a Community Edition of CPLEX runtimes, depending on the size of the problem, the solve stage may fail and will need a paying subscription or product installation.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThe model can be solved by calling:", "apps": [], "results": {"msg": [{"data": "<p>The model can be solved by calling:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Solve the model\nprint(\"Solving model....\")\nmsol = mdl.solve(url=SVC_URL, key=SVC_KEY, TimeLimit=10)", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 6: Investigate the solution and then run an example analysis\n\nThe shortest way to output the solution that has been found by the solver is to call the method <i>print_solution()</i> as follows:", "apps": [], "results": {"msg": [{"data": "<h3>Step 6: Investigate the solution and then run an example analysis</h3>\n<p></p>\n<p>The shortest way to output the solution that has been found by the solver is to call the method <i>print_solution()</i> as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Print solution\nprint(\"Solution: \")\nmsol.print_solution()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nThis output is totally generic and simply prints the value of all model variables, the objective value, and some other solving information.\n<p>\nA more specific output can be generated by writing more code. The following example illustrates how to access specific elements of the solution. ", "apps": [], "results": {"msg": [{"data": "<p>This output is totally generic and simply prints the value of all model variables, the objective value, and some other solving information.</p>\n<p><p></p>\n<p>A more specific output can be generated by writing more code. The following example illustrates how to access specific elements of the solution. </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Print solution\nfrom sys import stdout\nif msol:\n    # Print found solution\n    stdout.write(\"Solution: \" + msol.get_solve_status() + \"\\n\")\n    stdout.write(\"Position of ruler marks: \")\n    for v in marks:\n        stdout.write(\" \" + str(msol[v]))\n    stdout.write(\"\\n\")\n    stdout.write(\"Solve time: \" + str(round(msol.get_solve_time(), 2)) + \"s\\n\")\nelse:\n    # No solution found\n    stdout.write(\"No solution found. Search status: \" + msol.get_solve_status() + \"\\n\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nAnother possibility is for example to simulate real ruler using characters, as follows:", "apps": [], "results": {"msg": [{"data": "<p>Another possibility is for example to simulate real ruler using characters, as follows:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\n# Print solution as a ruler\nif msol:\n    stdout.write(\"Ruler: +\")\n    for i in range(1, ORDER):\n        stdout.write('-' * (msol[marks[i]] - msol[marks[i - 1]] - 1) + '+')\n    stdout.write(\"\\n\")", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n<h3>Going further with Constraint Programming</h3>\n\nThe last available installable package is available on Pypi here: https://pypi.python.org/pypi/docplex\n\nA complete set of modeling examples can be downloaded here: https://github.com/IBMDecisionOptimization/docplex-examples  ", "apps": [], "results": {"msg": [{"data": "<h3>Going further with Constraint Programming</h3>\n<p></p>\n<p>The last available installable package is available on Pypi here: https://pypi.python.org/pypi/docplex</p>\n<p></p>\n<p>A complete set of modeling examples can be downloaded here: https://github.com/IBMDecisionOptimization/docplex-examples  </p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Summary\n\nYou learned how to set up and use the IBM Decision Optimization CPLEX Modeling for Python to formulate a Constraint Programming model and solve it with IBM Decision Optimization on the cloud.", "apps": [], "results": {"msg": [{"data": "<h2>Summary</h2>\n<p></p>\n<p>You learned how to set up and use the IBM Decision Optimization CPLEX Modeling for Python to formulate a Constraint Programming model and solve it with IBM Decision Optimization on the cloud.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### References\n* [CPLEX Modeling for Python documentation](https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html)\n* [Decision Optimization on Cloud](https://developer.ibm.com/docloud/)\n* Need help with DOcplex or to report a bug? Please go [here](https://developer.ibm.com/answers/smartspace/docloud)\n* Contact us at dofeedback@wwpdl.vnet.ibm.com", "apps": [], "results": {"msg": [{"data": "<h4>References</h4>\n<ul>\n<li><a href=\"https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html\">CPLEX Modeling for Python documentation</a></li>\n</ul>\n<ul>\n<li><a href=\"https://developer.ibm.com/docloud/\">Decision Optimization on Cloud</a></li>\n</ul>\n<ul>\n<li>Need help with DOcplex or to report a bug? Please go <a href=\"https://developer.ibm.com/answers/smartspace/docloud\">here</a></li>\n</ul>\n<ul>\n<li>Contact us at dofeedback@wwpdl.vnet.ibm.com</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nCopyright \u00a9 2017 IBM. IPLA licensed Sample Materials.", "apps": [], "results": {"msg": [{"data": "<p>Copyright \u00a9 2017 IBM. IPLA licensed Sample Materials.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}]}