{"info": {}, "config": {"looknfeel": "default", "personalizedMode": "false"}, "name": "C:\\Users\\AURELIEFolacci\\python\\workspace\\docplex\\docplex\\src\\samples\\examples\\delivery\\jupyter\\logical_cts", "paragraphs": [{"settings": {"forms": {}, "params": {}}, "text": "%md\n# Use logical constraints with decision optimization\n\nThis tutorial includes everything you need to set up decision optimization engines, build a mathematical programming model, leveraging logical constraints.\n\n\nWhen you finish this tutorial, you'll have a foundational knowledge of _Prescriptive Analytics_.\n\n>This notebook is part of the **[Prescriptive Analytics for Python](https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html)**\n\n>It requires an [installation of CPLEX Optimizers](http://ibmdecisionoptimization.github.io/docplex-doc/getting_started.html)\n\nDiscover us [here](https://developer.ibm.com/docloud)\n\n\nTable of contents:\n\n-  Describe the business problem\n*  How decision optimization (prescriptive analytics) can help\n*  Use decision optimization\n    *  Step 1: Import the library\n    *  Step 2: Learn about constraint truth values\n    *  Step 3: Learn about equivalence constraints\n*  Summary\n****", "apps": [], "results": {"msg": [{"data": "<h1>Use logical constraints with decision optimization</h1>\n<p></p>\n<p>This tutorial includes everything you need to set up decision optimization engines, build a mathematical programming model, leveraging logical constraints.</p>\n<p></p>\n<p></p>\n<p>When you finish this tutorial, you'll have a foundational knowledge of <em>Prescriptive Analytics</em>.</p>\n<p></p>\n<blockquote>\n  <p>This notebook is part of the <strong><a href=\"https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html\">Prescriptive Analytics for Python</a></strong></p>\n</blockquote>\n<p></p>\n<blockquote>\n  <p>It requires an <a href=\"http://ibmdecisionoptimization.github.io/docplex-doc/getting_started.html\">installation of CPLEX Optimizers</a></p>\n</blockquote>\n<p></p>\n<p>Discover us <a href=\"https://developer.ibm.com/docloud\">here</a></p>\n<p></p>\n<p></p>\n<p>Table of contents:</p>\n<p></p>\n<ul>\n<li>Describe the business problem</li>\n</ul>\n<ul>\n<li>How decision optimization (prescriptive analytics) can help</li>\n</ul>\n<ul>\n<li>Use decision optimization</li>\n</ul>\n<pre><code>*  Step 1: Import the library\n</code></pre>\n<pre><code>*  Step 2: Learn about constraint truth values\n</code></pre>\n<pre><code>*  Step 3: Learn about equivalence constraints\n</code></pre>\n<ul>\n<li>Summary</li>\n</ul>\n<hr />\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nLogical constraints let you use the _truth value_ of constraints inside the model. The truth value of a constraint \nis true when it is satisfied and false when not. Adding a constraint to a model ensures that it is always satisfied. \nHowever, with logical constraints, one can use the truth value of a constraint _inside_ the model, allowing to choose dynamically whether a constraint is to be satisfied (or not).", "apps": [], "results": {"msg": [{"data": "<p>Logical constraints let you use the <em>truth value</em> of constraints inside the model. The truth value of a constraint </p>\n<p>is true when it is satisfied and false when not. Adding a constraint to a model ensures that it is always satisfied. </p>\n<p>However, with logical constraints, one can use the truth value of a constraint <em>inside</em> the model, allowing to choose dynamically whether a constraint is to be satisfied (or not).</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## How  decision optimization can help\n\n* Prescriptive analytics (decision optimization) technology recommends actions that are based on desired outcomes.  It takes into account specific scenarios, resources, and knowledge of past and current events. With this insight, your organization can make better decisions and have greater control of business outcomes.  \n\n* Prescriptive analytics is the next step on the path to insight-based actions. It creates value through synergy with predictive analytics, which analyzes data to predict future outcomes.  \n\n* Prescriptive analytics takes that insight to the next level by suggesting the optimal way to handle that future situation. Organizations that can act fast in dynamic conditions and make superior decisions in uncertain environments gain a strong competitive advantage.  \n<br/>\n\n<u>With prescriptive analytics, you can:</u> \n\n* Automate the complex decisions and trade-offs to better manage your limited resources.\n* Take advantage of a future opportunity or mitigate a future risk.\n* Proactively update recommendations based on changing events.\n* Meet operational goals, increase customer loyalty, prevent threats and fraud, and optimize business processes.\n\n", "apps": [], "results": {"msg": [{"data": "<h2>How  decision optimization can help</h2>\n<p></p>\n<ul>\n<li>Prescriptive analytics (decision optimization) technology recommends actions that are based on desired outcomes.  It takes into account specific scenarios, resources, and knowledge of past and current events. With this insight, your organization can make better decisions and have greater control of business outcomes.  </li>\n</ul>\n<p></p>\n<ul>\n<li>Prescriptive analytics is the next step on the path to insight-based actions. It creates value through synergy with predictive analytics, which analyzes data to predict future outcomes.  </li>\n</ul>\n<p></p>\n<ul>\n<li>Prescriptive analytics takes that insight to the next level by suggesting the optimal way to handle that future situation. Organizations that can act fast in dynamic conditions and make superior decisions in uncertain environments gain a strong competitive advantage.  </li>\n</ul>\n<p><br/></p>\n<p></p>\n<p><u>With prescriptive analytics, you can:</u> </p>\n<p></p>\n<ul>\n<li>Automate the complex decisions and trade-offs to better manage your limited resources.</li>\n</ul>\n<ul>\n<li>Take advantage of a future opportunity or mitigate a future risk.</li>\n</ul>\n<ul>\n<li>Proactively update recommendations based on changing events.</li>\n</ul>\n<ul>\n<li>Meet operational goals, increase customer loyalty, prevent threats and fraud, and optimize business processes.</li>\n</ul>\n<p></p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Use decision optimization", "apps": [], "results": {"msg": [{"data": "<h2>Use decision optimization</h2>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 1: Import the library\n\nRun the following code to import Decision Optimization CPLEX Modeling library.  The *DOcplex* library contains the two modeling packages, Mathematical Programming and Constraint Programming, referred to earlier.", "apps": [], "results": {"msg": [{"data": "<h3>Step 1: Import the library</h3>\n<p></p>\n<p>Run the following code to import Decision Optimization CPLEX Modeling library.  The <em>DOcplex</em> library contains the two modeling packages, Mathematical Programming and Constraint Programming, referred to earlier.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nimport sys\ntry:\n    import docplex.mp\nexcept:\n    raise Exception('Please install docplex. See https://pypi.org/project/docplex/')", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nA restart of the kernel might be needed.", "apps": [], "results": {"msg": [{"data": "<p>A restart of the kernel might be needed.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 2: Learn about constraint truth values\n\nAny discrete linear constraint can be associated to a binary variable that holds the truth value of the constraint. \nBut first, let's explain what a discrete constraint is", "apps": [], "results": {"msg": [{"data": "<h3>Step 2: Learn about constraint truth values</h3>\n<p></p>\n<p>Any discrete linear constraint can be associated to a binary variable that holds the truth value of the constraint. </p>\n<p>But first, let's explain what a discrete constraint is</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Discrete linear constraint\n\nA discrete linear constraint is built from discrete coefficients and discrete variables, taht is variables with type `integer` or `binary`. For example, assuming x and y are integer variables:\n\n - `2x+3y == 1` is discrete\n - `x+y = 3.14` is not (because of 3.14)\n - `1.1 x + 2.2 y <= 3` is not because of the non-integer coefficients 1.1 and 2.2", "apps": [], "results": {"msg": [{"data": "<h4>Discrete linear constraint</h4>\n<p></p>\n<p>A discrete linear constraint is built from discrete coefficients and discrete variables, taht is variables with type <code>integer</code> or <code>binary</code>. For example, assuming x and y are integer variables:</p>\n<p></p>\n<ul>\n<li><code>2x+3y == 1</code> is discrete</li>\n</ul>\n<ul>\n<li><code>x+y = 3.14</code> is not (because of 3.14)</li>\n</ul>\n<ul>\n<li><code>1.1 x + 2.2 y &lt;= 3</code> is not because of the non-integer coefficients 1.1 and 2.2</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### The truth value of an added constraint is always 1\n\nThe truth value of a constraint is accessed by the `status_var` property. This varianle is aplain Docplex decision variable that can be used anywhere a variable can. However, the value of the truth value variable and the constraint are linked, both ways:\n\n - a constraint is satisfied if and only if its truth value variable equals 1\n - a constraint is _not_ satisfied if and only if its truth value variable equals 0.\n\nIn this toy model,we show that the truth value of a constraint which has been added to a model is always equal to 1.", "apps": [], "results": {"msg": [{"data": "<h4>The truth value of an added constraint is always 1</h4>\n<p></p>\n<p>The truth value of a constraint is accessed by the <code>status_var</code> property. This varianle is aplain Docplex decision variable that can be used anywhere a variable can. However, the value of the truth value variable and the constraint are linked, both ways:</p>\n<p></p>\n<ul>\n<li>a constraint is satisfied if and only if its truth value variable equals 1</li>\n</ul>\n<ul>\n<li>a constraint is <em>not</em> satisfied if and only if its truth value variable equals 0.</li>\n</ul>\n<p></p>\n<p>In this toy model,we show that the truth value of a constraint which has been added to a model is always equal to 1.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nfrom docplex.mp.model import Model\n\nm1 = Model()\nx = m1.integer_var(name='ix')\ny = m1.integer_var(name='iy')\nct = m1.add(x + y <= 3)\nct_truth = ct.status_var\nm1.maximize(x+y)\nassert m1.solve()\nprint('the truth value of [{0!s}] is {1}'.format(ct, ct_truth.solution_value))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### The truth value of a constraint not added to a model is undefined\n\nA constraint that is not added to a model, has no effect. Its truth value is undefined: it can be either 1 or 0.\n\nIn the following example, both `x` and `y` are set to their upper bound, so that the constraint is not satisfied; hence the truth value is 0.", "apps": [], "results": {"msg": [{"data": "<h4>The truth value of a constraint not added to a model is undefined</h4>\n<p></p>\n<p>A constraint that is not added to a model, has no effect. Its truth value is undefined: it can be either 1 or 0.</p>\n<p></p>\n<p>In the following example, both <code>x</code> and <code>y</code> are set to their upper bound, so that the constraint is not satisfied; hence the truth value is 0.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nm2 = Model()\nx = m2.integer_var(name='ix', ub=4)\ny = m2.integer_var(name='iy', ub=4)\nct = (x + y <= 3)\nct_truth = ct.status_var  # not m2.add() here!\nm2.maximize(x+y)\nassert m2.solve()\nm2.print_solution()\nprint('the truth value of [{0!s}] is {1}'.format(ct, ct_truth.solution_value))", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Using constraint truth values in modeling\n\nA constraint's truth value is actually a plain DOcplex decision variable, and as such, can be used with comparison operators and arithmetic operators.\nLet's experiment again with a toy model: in this model,\nwe state that the truth value of `y == 4` is less than the truth value of `x ==3`.\nAs we maximize y, y has value 4 in the optimal solution (it is the upper bound), and consequently the constraint `ct_y4` is satisfied. From the inequality between truth values,\nit follows that the truth value of `ct_x2` equals 1 and x is equal to 2.\n\nUsing the constraints in the inequality has silently converted each constraint into its truth value.", "apps": [], "results": {"msg": [{"data": "<h4>Using constraint truth values in modeling</h4>\n<p></p>\n<p>A constraint's truth value is actually a plain DOcplex decision variable, and as such, can be used with comparison operators and arithmetic operators.</p>\n<p>Let's experiment again with a toy model: in this model,</p>\n<p>we state that the truth value of <code>y == 4</code> is less than the truth value of <code>x ==3</code>.</p>\n<p>As we maximize y, y has value 4 in the optimal solution (it is the upper bound), and consequently the constraint <code>ct_y4</code> is satisfied. From the inequality between truth values,</p>\n<p>it follows that the truth value of <code>ct_x2</code> equals 1 and x is equal to 2.</p>\n<p></p>\n<p>Using the constraints in the inequality has silently converted each constraint into its truth value.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nm3 = Model()\nx = m3.integer_var(name='ix', ub=4)\ny = m3.integer_var(name='iy', ub=4)\nct_x2 = (x == 2)\nct_y4 = (y == 4)\nm3.add( ct_y4 <= ct_x2 )\nm3.maximize(y)\nassert m3.solve()\nm3.print_solution()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nConstraint truth values can be used with arithmetic operators, just as variables can. In th enext model, we express a more complex constraint:\n- either x is equal to 3, _or_ both y and z are equal to 5\n\nLet's see how we can express this easilty with truth values:", "apps": [], "results": {"msg": [{"data": "<p>Constraint truth values can be used with arithmetic operators, just as variables can. In th enext model, we express a more complex constraint:</p>\n<ul>\n<li>either x is equal to 3, <em>or</em> both y and z are equal to 5</li>\n</ul>\n<p></p>\n<p>Let's see how we can express this easilty with truth values:</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nm31 = Model(name='m31')\nx = m31.integer_var(name='ix', ub=4)\ny = m31.integer_var(name='iy', ub=10)\nz = m31.integer_var(name='iz', ub=10)\nct_x2 = (x == 3)\nct_y5 = (y == 5)\nct_z5 = (z == 5)\n#either ct-x2 is true or -both- ct_y5 and ct_z5 mus be true\nm31.add( 2 * ct_x2 + (ct_y5 + ct_z5) == 2)\n# force x to be less than 2: it cannot be equal to 3!\nm31.add(x <= 2)\n# maximize sum of x,y,z\nm31.maximize(x+y+z)\nassert m31.solve()\n# the expected solution is: x=2, y=5, z=5\nassert m31.objective_value == 12\nm31.print_solution()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nAs we have seen, constraints can be used in expressions. This includes the `Model.sum()` and `Model.dot()` aggregation methods.\n\nIn the next model, we define ten variables, one of which must be equal to 3 (we dpn't care which one, for now). As we maximize the sum of all `xs` variables, all will end up equal to their upper bound, except for one.", "apps": [], "results": {"msg": [{"data": "<p>As we have seen, constraints can be used in expressions. This includes the <code>Model.sum()</code> and <code>Model.dot()</code> aggregation methods.</p>\n<p></p>\n<p>In the next model, we define ten variables, one of which must be equal to 3 (we dpn't care which one, for now). As we maximize the sum of all <code>xs</code> variables, all will end up equal to their upper bound, except for one.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nm4 = Model()\nxs = m4.integer_var_list(10, ub=100)\ncts = [xi==3 for xi in xs]\nm4.add( m4.sum(cts) == 1)\nm4.maximize(m4.sum(xs))\nassert m4.solve()\nm4.print_solution()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nAs we can see, all variables but one are set to their upper bound of 100. We cannot predict which variable will be set to 3. \nHowever, let's imagine that we prefer variable with a lower index to be set to 3, how can we express this preference? \n\nThe answer is to use an additional expression to the objective, using a scalar product of constraint truth value", "apps": [], "results": {"msg": [{"data": "<p>As we can see, all variables but one are set to their upper bound of 100. We cannot predict which variable will be set to 3. </p>\n<p>However, let's imagine that we prefer variable with a lower index to be set to 3, how can we express this preference? </p>\n<p></p>\n<p>The answer is to use an additional expression to the objective, using a scalar product of constraint truth value</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\npreference = m4.dot(cts, (k+1 for k in range(len(xs))))\n# we prefer lower indices for satisfying the x==3 constraint\n# so the final objective is a maximize of sum of xs -minus- the preference\nm4.maximize(m4.sum(xs) - preference)\nassert m4.solve()\nm4.print_solution()", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nAs expected, the `x` variable set to 3 now is the first one.", "apps": [], "results": {"msg": [{"data": "<p>As expected, the <code>x</code> variable set to 3 now is the first one.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Using truth values to state 'not equals' constraints.\n\nTruth values can be used to express elegantly 'not equal' constraints, by forcing the truth value of an equality constraint to 0.\n\nIn the next model, we illustrate how an equality constraint can be negated by forcing its truth value to zero. This negation forbids y to be equal to 4, as it would be without this negation.\nFinally, the objective is 7 instead of 8.", "apps": [], "results": {"msg": [{"data": "<h4>Using truth values to state 'not equals' constraints.</h4>\n<p></p>\n<p>Truth values can be used to express elegantly 'not equal' constraints, by forcing the truth value of an equality constraint to 0.</p>\n<p></p>\n<p>In the next model, we illustrate how an equality constraint can be negated by forcing its truth value to zero. This negation forbids y to be equal to 4, as it would be without this negation.</p>\n<p>Finally, the objective is 7 instead of 8.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nm5 = Model()\nx = m5.integer_var(name='ix', ub=4)\ny = m5.integer_var(name='iy', ub=4)\n# this is the equality constraint we want to negate\nct_y4 = (y == 4)\n# forcing truth value to zero means the constraint is not satisfied.\nnegation = m5.add( ct_y4 == 0)\n# maximize x+y should yield both variables to 4, but y cannot be equal to 4\n# as such we expect y to be equal to 3\nm5.maximize(x + y)\nassert m5.solve()\nm5.print_solution()\n# expecting 7 as objective, not 8\nassert m5.objective_value == 7\n\n# now remove the negation\nm5.remove_constraint(negation)\n# and solve again\nassert m5.solve()\n# the objective is 8 as expected: both x and y are equal to 4\nassert m5.objective_value == 8", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### Summary\n\nWe have seen that linear constraints have an associated binary variable, its _truth value_, whose value is linked to whether or not the constraint is satisfied. \nMoreover, this llink enables to express 'not equals' constraints.# now remove netation", "apps": [], "results": {"msg": [{"data": "<h4>Summary</h4>\n<p></p>\n<p>We have seen that linear constraints have an associated binary variable, its <em>truth value</em>, whose value is linked to whether or not the constraint is satisfied. </p>\n<p>Moreover, this llink enables to express 'not equals' constraints.# now remove netation</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n### Step 3: Learn about equivalence constraints\n\nAs we have seen, using a constraint in expressions automtically generates a truth value variable, whose value is linked to the status of the constraint. \n\nHowever, in some cases, it can be useful to relate the status of a constraint to an _existing_ binary variable. This is the purpose of equivalence constraints.\n\nAn equiavelnec constraints relates an existing binary variable to the status of a discrete linear constraints. The syntax is:\n\n    `Model.add_equivalence(bvar, linear_ct, active_value, name)`\n    \n - `bvar` is the existing binary variable\n - `linear-ct` is a discrete linear constraint\n - `active_value` can take values 1 or 0 (the default is 1)\n - `name` is an optional string to name the equivalence.", "apps": [], "results": {"msg": [{"data": "<h3>Step 3: Learn about equivalence constraints</h3>\n<p></p>\n<p>As we have seen, using a constraint in expressions automtically generates a truth value variable, whose value is linked to the status of the constraint. </p>\n<p></p>\n<p>However, in some cases, it can be useful to relate the status of a constraint to an <em>existing</em> binary variable. This is the purpose of equivalence constraints.</p>\n<p></p>\n<p>An equiavelnec constraints relates an existing binary variable to the status of a discrete linear constraints. The syntax is:</p>\n<p></p>\n<pre><code>`Model.add_equivalence(bvar, linear_ct, active_value, name)`\n</code></pre>\n<p></p>\n<ul>\n<li><code>bvar</code> is the existing binary variable</li>\n</ul>\n<ul>\n<li><code>linear-ct</code> is a discrete linear constraint</li>\n</ul>\n<ul>\n<li><code>active_value</code> can take values 1 or 0 (the default is 1)</li>\n</ul>\n<ul>\n<li><code>name</code> is an optional string to name the equivalence.</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%python\nm6 = Model(name='m6')\nsize = 7\nil = m6.integer_var_list(size, name='i', ub=10)\njl = m6.integer_var_list(size, name='j', ub=10)\nbl = m6.binary_var_list(size, name='b')\nfor k in range(size):\n    # for each i, relate bl_k to il_k==5 *and* jl_k == 7\n    m6.add_equivalence(bl[k], il[k] == 5)\n    m6.add_equivalence(bl[k], jl[k] == 7)\n# now maximize sum of bs\nm6.maximize(m6.sum(bl))\nassert m6.solve()\nm6.print_solution()\n\n", "apps": [], "results": {"msg": [{"data": "", "type": "ANGULAR"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": false, "language": "python"}, "editorMode": "ace/mode/python", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n## Summary\n\n\nYou learned how to set up and use the IBM Decision Optimization CPLEX Modeling for Python to formulate a Mathematical Programming model with logical constraints.", "apps": [], "results": {"msg": [{"data": "<h2>Summary</h2>\n<p></p>\n<p></p>\n<p>You learned how to set up and use the IBM Decision Optimization CPLEX Modeling for Python to formulate a Mathematical Programming model with logical constraints.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\n#### References\n* [Decision Optimization CPLEX Modeling for Python documentation](https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html)\n* [Decision Optimization on Cloud](https://developer.ibm.com/docloud/)\n* Need help with DOcplex or to report a bug? Please go [here](https://developer.ibm.com/answers/smartspace/docloud)\n* Contact us at dofeedback@wwpdl.vnet.ibm.com\"\n", "apps": [], "results": {"msg": [{"data": "<h4>References</h4>\n<ul>\n<li><a href=\"https://rawgit.com/IBMDecisionOptimization/docplex-doc/master/docs/index.html\">Decision Optimization CPLEX Modeling for Python documentation</a></li>\n</ul>\n<ul>\n<li><a href=\"https://developer.ibm.com/docloud/\">Decision Optimization on Cloud</a></li>\n</ul>\n<ul>\n<li>Need help with DOcplex or to report a bug? Please go <a href=\"https://developer.ibm.com/answers/smartspace/docloud\">here</a></li>\n</ul>\n<ul>\n<li>Contact us at dofeedback@wwpdl.vnet.ibm.com\"</li>\n</ul>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}, {"settings": {"forms": {}, "params": {}}, "text": "%md\nCopyright \u00a9 2017-2018 IBM. Sample Materials.", "apps": [], "results": {"msg": [{"data": "<p>Copyright \u00a9 2017-2018 IBM. Sample Materials.</p>\n", "type": "HTML"}], "code": "SUCCESS"}, "user": "anonymous", "config": {"editorSetting": {"editOnDblClick": true, "language": "markdown"}, "editorMode": "ace/mode/markdown", "colWidth": 12, "enabled": true, "results": {}}}]}